Ext.ns("X");Ext.data.Connection.override({timeout:300000});Ext.Ajax.timeout=300000;Ext.net.DirectEvent.timeout=300000;var pageSize={width:parseInt(Ext.getBody().getViewSize().width,10),height:parseInt(Ext.getBody().getViewSize().height,10)};var RTCurve={chart:null,dataProvider:null,container:null,chartGraph:null,render:function(){this.dataProvider=[];this.container=document.getElementById("chartContainer");if(!this.chart){this.renderChart()}},renderChart:function(){this.chart=new AmCharts.AmSerialChart();this.chart.pathToImages="/Resources/amcharts/images/";this.chart.zoomOutButton={backgroundColor:"#000000",backgroundAlpha:0.15};this.chart.dataProvider=this.dataProvider;this.chart.categoryField="amxName";this.chart.startDuration=0;var d=this.chart.categoryAxis;d.parseDates=true;d.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MM/DD"},{period:"MM",format:"YYYY/MM"},{period:"YYYY",format:"YYYY"}];d.minPeriod="ss";d.dashLength=1;var e=new AmCharts.ValueAxis();e.dashLength=1;e.fillColor="#000000";e.fillAlpha=0.05;this.chart.addValueAxis(e);var c=new AmCharts.AmGraph();c.title="step line";c.type="step";c.valueField="amxValue";c.descriptionField="amxUnit";c.bullet="round";c.balloonText="[[description]]";c.lineColor="#0352B5";c.negativeLineColor="#00CC00";c.hideBulletsCount=100;this.chartGraph=c;this.chart.addGraph(c);var a=new AmCharts.ChartCursor();a.cursorAlpha=1;a.cursorColor="#0352B5";a.cursorPosition="mouse";a.categoryBalloonDateFormat="JJ:NN:SS";a.pan=true;this.chart.addChartCursor(a);var b=new AmCharts.ChartScrollbar();b.graph=c;b.graphLineAlpha=0.5;b.graphFillAlpha=0;b.selectedGraphFillAlpha=0;b.selectedGraphLineAlpha=0.5;b.scrollbarHeight=25;this.chart.addChartScrollbar(b);this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height-80)+"px";this.chart.write(this.container.id)},updateTitle:function(){X.RealTimeCurve.GetTitle({success:function(a){if(!Ext.isEmpty(a,false)){if(RTCurve.chart){RTCurve.chart.addTitle(a,15);btnStart.fireEvent("click")}}}})},appendData:function(){X.RealTimeCurve.GetData({success:function(a){if(!Ext.isEmpty(a,false)){var b=Ext.util.JSON.decode(a,true);if(b!=null){if(RTCurve.dataProvider.length>=360){RTCurve.dataProvider.shift()}RTCurve.dataProvider.push({amxName:new Date(Date.parse(b.amxName.replace(/-/g,"/"))),amxValue:b.amxValue,amxUnit:b.amxUnit});RTCurve.chart.dataProvider=RTCurve.dataProvider;RTCurve.chart.validateData()}}}})}};var HisRTCurve={chart:null,dataProvider:null,container:null,render:function(){this.initDataProvider();if(!this.chart){this.renderChart()}},initDataProvider:function(){this.dataProvider=[{amxName:new Date(),amxValue:0,amxDesc:null}]},renderChart:function(){this.chart=new AmCharts.AmSerialChart();this.chart.pathToImages="/Resources/amcharts/images/";this.chart.zoomOutButton={backgroundColor:"#000000",backgroundAlpha:0.15};this.chart.dataProvider=this.dataProvider;this.chart.categoryField="amxName";this.chart.addListener("dataUpdated",this.zoomChart);var d=this.chart.categoryAxis;d.parseDates=true;d.dateFormats=[{period:"fff",format:"YYYY/MM/DD JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"YYYY/MM/DD"},{period:"MM",format:"YYYY/MM"},{period:"YYYY",format:"YYYY"}];d.minPeriod="fff";d.dashLength=1;var e=new AmCharts.ValueAxis();e.dashLength=1;e.fillColor="#000000";e.fillAlpha=0.05;this.chart.addValueAxis(e);var c=new AmCharts.AmGraph();c.title="detail line";c.valueField="amxValue";c.descriptionField="amxDesc";c.bullet="round";c.bulletSize=5;c.bulletColor="#FFFFFF";c.bulletBorderColor="#0352B5";c.bulletBorderThickness=1;c.balloonText="[[description]]";c.lineColor="#0352B5";c.negativeLineColor="#00CC00";c.hideBulletsCount=50;this.chart.addGraph(c);var a=new AmCharts.ChartCursor();a.cursorAlpha=1;a.cursorColor="#0352B5";a.cursorPosition="mouse";a.categoryBalloonDateFormat="YYYY/MM/DD JJ:NN:SS";a.pan=true;this.chart.addChartCursor(a);var b=new AmCharts.ChartScrollbar();b.graph=c;b.scrollbarHeight=30;b.color="#FFFFFF";b.autoGridCount=true;this.chart.addChartScrollbar(b);this.container=document.getElementById("chartContainer");this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height*0.6)+"px";this.chart.write(this.container.id)},zoomChart:function(){HisRTCurve.chart.zoomToIndexes(0,200)},addTitle:function(b,a){if(this.chart){this.chart.addTitle(b,a)}},setData:function(){X.HisRealTimeCurve.GetData({success:function(b){HisRTCurve.dataProvider=[];HisRTCurve.chart.titles=[];if(!Ext.isEmpty(b,false)){var a=Ext.util.JSON.decode(b,true);if(a!=null){Ext.each(a.Data,function(c){HisRTCurve.dataProvider.push({amxName:new Date(Date.parse(c.amxName.replace(/-/g,"/"))),amxValue:c.amxValue,amxDesc:c.amxDesc})});HisRTCurve.addTitle(a.Title,15);HisRTCurve.addTitle(a.SubTitle,10)}}if(HisRTCurve.dataProvider.length==0){HisRTCurve.initDataProvider()}HisRTCurve.chart.dataProvider=HisRTCurve.dataProvider;HisRTCurve.chart.validateData()}})},setCenterPanel:function(a){a.setHeight(pageSize.height*0.7)},setSouthPanel:function(a){a.setHeight(pageSize.height*0.25)},getColumnNames:function(c){var a="<Names>";if(c){var b=c.getColumnModel().config;Ext.each(b,function(d){if(!d.hidden&&!Ext.isEmpty(d.dataIndex,false)){a+='<Name DataIndex="'+d.dataIndex+'" Header="'+d.header+'" />'}})}a+="</Names>";return a}};var HisCntCurve={chart:null,dataProvider:null,container:null,render:function(){this.initDataProvider();if(!this.chart){this.renderChart()}},initDataProvider:function(){this.dataProvider=[{amxName:new Date(),amxMaxValue:0,amxMaxDesc:null}]},renderChart:function(){this.chart=new AmCharts.AmSerialChart();this.chart.pathToImages="/Resources/amcharts/images/";this.chart.zoomOutButton={backgroundColor:"#000000",backgroundAlpha:0.15};this.chart.dataProvider=this.dataProvider;this.chart.categoryField="amxName";this.chart.addListener("dataUpdated",this.zoomChart);var g=this.chart.categoryAxis;g.parseDates=true;g.dateFormats=[{period:"fff",format:"YYYY/MM/DD JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"YYYY/MM/DD"},{period:"MM",format:"YYYY/MM"},{period:"YYYY",format:"YYYY"}];g.minPeriod="fff";g.dashLength=1;var h=new AmCharts.ValueAxis();h.dashLength=1;h.fillColor="#000000";h.fillAlpha=0.05;this.chart.addValueAxis(h);var d=new AmCharts.AmGraph();d.title=LanguageSet.MaxValue;d.type="smoothedLine";d.valueField="amxMaxValue";d.descriptionField="amxMaxDesc";d.bullet="round";d.bulletColor="#FFFFFF";d.bulletBorderColor="#0352B5";d.bulletBorderThickness=1;d.bulletSize=5;d.balloonText="[[description]]";d.lineColor="#0352B5";d.hideBulletsCount=50;this.chart.addGraph(d);var b=new AmCharts.AmGraph();b.title=LanguageSet.MinValue;b.type="smoothedLine";b.valueField="amxMinValue";b.descriptionField="amxMinDesc";b.bullet="round";b.bulletColor="#FFFFFF";b.bulletBorderColor="#00CC00";b.bulletBorderThickness=1;b.bulletSize=5;b.balloonText="[[description]]";b.lineColor="#00CC00";b.hideBulletsCount=50;this.chart.addGraph(b);var a=new AmCharts.AmGraph();a.title=LanguageSet.AvgValue;a.type="smoothedLine";a.valueField="amxAvgValue";a.descriptionField="amxAvgDesc";a.bullet="round";a.bulletColor="#FFFFFF";a.bulletBorderColor="#FFCC00";a.bulletBorderThickness=1;a.bulletSize=5;a.balloonText="[[description]]";a.lineColor="#FFCC00";a.hideBulletsCount=50;this.chart.addGraph(a);var c=new AmCharts.ChartCursor();c.cursorAlpha=1;c.cursorColor="#0352B5";c.cursorPosition="mouse";c.categoryBalloonDateFormat="YYYY/MM/DD JJ:NN:SS";c.pan=true;this.chart.addChartCursor(c);var f=new AmCharts.ChartScrollbar();f.graph=a;f.scrollbarHeight=30;f.color="#FFFFFF";f.autoGridCount=true;this.chart.addChartScrollbar(f);var e=new AmCharts.AmLegend();this.chart.addLegend(e);this.container=document.getElementById("chartContainer");this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height*0.6)+"px";this.chart.write(this.container.id)},zoomChart:function(){HisCntCurve.chart.zoomToIndexes(0,200)},addTitle:function(b,a){if(this.chart){this.chart.addTitle(b,a)}},setData:function(){X.HisCountCurve.GetData({success:function(b){HisCntCurve.dataProvider=[];HisCntCurve.chart.titles=[];if(!Ext.isEmpty(b,false)){var a=Ext.util.JSON.decode(b,true);if(a!=null){Ext.each(a.Data,function(c){HisCntCurve.dataProvider.push({amxName:new Date(Date.parse(c.amxName.replace(/-/g,"/"))),amxMaxValue:c.amxMaxValue,amxMaxDesc:c.amxMaxDesc,amxMinValue:c.amxMinValue,amxMinDesc:c.amxMinDesc,amxAvgValue:c.amxAvgValue,amxAvgDesc:c.amxAvgDesc})});HisCntCurve.addTitle(a.Title,15);HisCntCurve.addTitle(a.SubTitle,10)}}if(HisCntCurve.dataProvider.length==0){HisCntCurve.initDataProvider()}HisCntCurve.chart.dataProvider=HisCntCurve.dataProvider;HisCntCurve.chart.validateData()}})},setCenterPanel:function(a){a.setHeight(pageSize.height*0.7)},setSouthPanel:function(a){a.setHeight(pageSize.height*0.25)},getColumnNames:function(c){var a="<Names>";if(c){var b=c.getColumnModel().config;Ext.each(b,function(d){if(!d.hidden&&!Ext.isEmpty(d.dataIndex,false)){a+='<Name DataIndex="'+d.dataIndex+'" Header="'+d.header+'" />'}})}a+="</Names>";return a}};var StaAvailability={chart:null,dataProvider:[{amxName:"",amxValue:0,amxColor:null}],container:null,initDataProvider:function(){this.dataProvider=[{amxName:"",amxValue:0,amxColor:null}]},renderAmSerialChart:function(){this.chart=new AmCharts.AmSerialChart();this.chart.dataProvider=this.dataProvider;this.chart.categoryField="amxName";this.chart.startDuration=1;this.chart.depth3D=20;this.chart.angle=30;var b=this.chart.categoryAxis;b.labelRotation=45;b.dashLength=1;b.gridPosition="start";var c=new AmCharts.ValueAxis();c.title=LanguageSet.Availability;c.dashLength=1;c.fillColor="#000000";c.fillAlpha=0.05;this.chart.addValueAxis(c);var a=new AmCharts.AmGraph();a.title="station availability graph";a.type="column";a.valueField="amxValue";a.colorField="amxColor";a.balloonText="[[category]]: [[value]]%";a.lineAlpha=0;a.fillAlphas=1;this.chart.addGraph(a);this.container=document.getElementById("chartContainer");this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height*0.5)+"px";this.container.innerHTML="";this.chart.write(this.container.id)},renderAmPieChart:function(){this.chart=new AmCharts.AmPieChart();this.chart.dataProvider=this.dataProvider;this.chart.titleField="amxName";this.chart.valueField="amxValue";this.chart.startDuration=1;this.chart.outlineColor="#FFFFFF";this.chart.outlineAlpha=0.8;this.chart.outlineThickness=2;this.chart.depth3D=15;this.chart.angle=30;this.container=document.getElementById("chartContainer");this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height*0.5)+"px";this.container.innerHTML="";this.chart.write(this.container.id)},addTitle:function(b,a){if(this.chart){this.chart.addTitle(b,a)}},setData:function(){X.StaAvailabilityReport.GetData({success:function(b){StaAvailability.dataProvider=[];StaAvailability.chart.titles=[];if(!Ext.isEmpty(b,false)){var a=Ext.util.JSON.decode(b,true);if(a!=null){Ext.each(a.Data,function(c){StaAvailability.dataProvider.push({amxName:c.amxName,amxValue:c.amxValue,amxColor:c.amxColor})})}}if(StaAvailability.dataProvider.length==0){StaAvailability.initDataProvider()}StaAvailability.chart.dataProvider=StaAvailability.dataProvider;StaAvailability.chart.validateData()}})},setCenterPanel:function(a){a.setHeight(pageSize.height*0.6)},setSouthPanel:function(a){a.setHeight(pageSize.height*0.35)},getColumnNames:function(c){var a="<Names>";if(c){var b=c.getColumnModel().config;Ext.each(b,function(d){if(!d.hidden&&!Ext.isEmpty(d.dataIndex,false)){a+='<Name DataIndex="'+d.dataIndex+'" Header="'+d.header+'" />'}})}a+="</Names>";return a},selectType:function(a,b){switch(b.data.value){case"column":this.renderAmSerialChart();break;case"pie":this.renderAmPieChart();break;default:break}},getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.StaAvailabilityReport.InitRateCountTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(StaAvailability.getValues(this),StaAvailability.getTexts(this),false)}};var DevAvailability={chart:null,dataProvider:[{amxName:"",amxValue:0,amxColor:null}],container:null,initDataProvider:function(){this.dataProvider=[{amxName:"",amxValue:0,amxColor:null}]},renderAmSerialChart:function(){this.chart=new AmCharts.AmSerialChart();this.chart.dataProvider=this.dataProvider;this.chart.categoryField="amxName";this.chart.startDuration=1;this.chart.depth3D=20;this.chart.angle=30;var b=this.chart.categoryAxis;b.labelRotation=45;b.dashLength=1;b.gridPosition="start";var c=new AmCharts.ValueAxis();c.title=LanguageSet.Availability;c.dashLength=1;c.fillColor="#000000";c.fillAlpha=0.05;this.chart.addValueAxis(c);var a=new AmCharts.AmGraph();a.title="device availability graph";a.type="column";a.valueField="amxValue";a.colorField="amxColor";a.balloonText="[[category]]: [[value]]%";a.lineAlpha=0;a.fillAlphas=1;this.chart.addGraph(a);this.container=document.getElementById("chartContainer");this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height*0.5)+"px";this.container.innerHTML="";this.chart.write(this.container.id)},renderAmPieChart:function(){this.chart=new AmCharts.AmPieChart();this.chart.dataProvider=this.dataProvider;this.chart.titleField="amxName";this.chart.valueField="amxValue";this.chart.startDuration=1;this.chart.outlineColor="#FFFFFF";this.chart.outlineAlpha=0.8;this.chart.outlineThickness=2;this.chart.depth3D=15;this.chart.angle=30;this.container=document.getElementById("chartContainer");this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height*0.5)+"px";this.container.innerHTML="";this.chart.write(this.container.id)},addTitle:function(b,a){if(this.chart){this.chart.addTitle(b,a)}},setData:function(){X.DevAvailabilityReport.GetData({success:function(b){DevAvailability.dataProvider=[];DevAvailability.chart.titles=[];if(!Ext.isEmpty(b,false)){var a=Ext.util.JSON.decode(b,true);if(a!=null){Ext.each(a.Data,function(c){DevAvailability.dataProvider.push({amxName:c.amxName,amxValue:c.amxValue,amxColor:c.amxColor})})}}if(DevAvailability.dataProvider.length==0){DevAvailability.initDataProvider()}DevAvailability.chart.dataProvider=DevAvailability.dataProvider;DevAvailability.chart.validateData()}})},setCenterPanel:function(a){a.setHeight(pageSize.height*0.6)},setSouthPanel:function(a){a.setHeight(pageSize.height*0.35)},getColumnNames:function(c){var a="<Names>";if(c){var b=c.getColumnModel().config;Ext.each(b,function(d){if(!d.hidden&&!Ext.isEmpty(d.dataIndex,false)){a+='<Name DataIndex="'+d.dataIndex+'" Header="'+d.header+'" />'}})}a+="</Names>";return a},selectType:function(a,b){switch(b.data.value){case"column":this.renderAmSerialChart();break;case"pie":this.renderAmPieChart();break;default:break}},getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.DevAvailabilityReport.InitRateCountTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(DevAvailability.getValues(this),DevAvailability.getTexts(this),false)}};var DevPRCurve={chart:null,dataProvider:null,container:null,render:function(){this.initDataProvider();if(!this.chart){this.renderChart()}},initDataProvider:function(){this.dataProvider=[{amxName:new Date(),amxValue:0,amxDesc:null}]},renderChart:function(){this.chart=new AmCharts.AmSerialChart();this.chart.pathToImages="/Resources/amcharts/images/";this.chart.zoomOutButton={backgroundColor:"#000000",backgroundAlpha:0.15};this.chart.dataProvider=this.dataProvider;this.chart.categoryField="amxName";this.chart.addListener("dataUpdated",this.zoomChart);var d=this.chart.categoryAxis;d.parseDates=true;d.dateFormats=[{period:"fff",format:"YYYY/MM/DD JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"YYYY/MM/DD"},{period:"MM",format:"YYYY/MM"},{period:"YYYY",format:"YYYY"}];d.minPeriod="fff";d.dashLength=1;var e=new AmCharts.ValueAxis();e.dashLength=1;e.fillColor="#000000";e.fillAlpha=0.05;this.chart.addValueAxis(e);var c=new AmCharts.AmGraph();c.title="detail line";c.valueField="amxValue";c.descriptionField="amxDesc";c.bullet="round";c.bulletSize=5;c.bulletColor="#FFFFFF";c.bulletBorderColor="#0352B5";c.bulletBorderThickness=1;c.balloonText="[[description]]";c.lineColor="#0352B5";c.negativeLineColor="#00CC00";c.hideBulletsCount=50;this.chart.addGraph(c);var a=new AmCharts.ChartCursor();a.cursorAlpha=1;a.cursorColor="#0352B5";a.cursorPosition="mouse";a.categoryBalloonDateFormat="YYYY/MM/DD JJ:NN:SS";a.pan=true;this.chart.addChartCursor(a);var b=new AmCharts.ChartScrollbar();b.graph=c;b.scrollbarHeight=30;b.color="#FFFFFF";b.autoGridCount=true;this.chart.addChartScrollbar(b);this.container=document.getElementById("chartContainer");this.container.style.width=(pageSize.width-5)+"px";this.container.style.height=(pageSize.height*0.6)+"px";this.chart.write(this.container.id)},zoomChart:function(){DevPRCurve.chart.zoomToIndexes(0,200)},addTitle:function(b,a){if(this.chart){this.chart.addTitle(b,a)}},setData:function(){X.DevPerformanceReport.GetData({success:function(b){DevPRCurve.dataProvider=[];DevPRCurve.chart.titles=[];if(!Ext.isEmpty(b,false)){var a=Ext.util.JSON.decode(b,true);if(a!=null){Ext.each(a.Data,function(c){DevPRCurve.dataProvider.push({amxName:new Date(Date.parse(c.amxName.replace(/-/g,"/"))),amxValue:c.amxValue,amxDesc:c.amxDesc})});DevPRCurve.addTitle(a.Title,15);DevPRCurve.addTitle(a.SubTitle,10)}}if(DevPRCurve.dataProvider.length==0){DevPRCurve.initDataProvider()}DevPRCurve.chart.dataProvider=DevPRCurve.dataProvider;DevPRCurve.chart.validateData()}})},setCenterPanel:function(a){a.setHeight(pageSize.height*0.7)},setSouthPanel:function(a){a.setHeight(pageSize.height*0.25)},getColumnNames:function(c){var a="<Names>";if(c){var b=c.getColumnModel().config;Ext.each(b,function(d){if(!d.hidden&&!Ext.isEmpty(d.dataIndex,false)){a+='<Name DataIndex="'+d.dataIndex+'" Header="'+d.header+'" />'}})}a+="</Names>";return a}};
