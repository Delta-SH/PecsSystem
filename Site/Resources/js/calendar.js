var CompanyX={getCalendar:function(){return CompanyX.RightNavCalendarPanel},getStore:function(){return CompanyX.CalendarEventStore},getWindow:function(){return CompanyX.CalendarEventEditWindow},viewChange:function(d,a,b){var c=this.getWindow();if(c){c.hide()}if(b!==null){this.CalendarDatePicker.setValue(b.activeDate);this.updateTitle(b.viewStart,b.viewEnd)}},updateTitle:function(b,a){var c="";if(b.clearTime().getTime()==a.clearTime().getTime()){c=b.format("Y/m/d")}else{c=b.format("Y/m/d")+" - "+a.format("Y/m/d")}this.MainPanel.setTitle(c)},setStartDate:function(b,a){this.getCalendar().setStartDate(a)},rangeSelect:function(b,a,c){this.record.show(b,a);this.getWindow().on("hide",c,b,{single:true})},dayClick:function(d,b,c,a){this.record.show.call(this,d,{StartDate:b,IsAllDay:c},a)},record:{add:function(a,b){a.hide();X.CalendarManager.AddRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Saving,target:"customtarget",customTarget:this.getCalendar()}})},update:function(a,b){a.hide();X.CalendarManager.UpdateRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Updating,target:"customtarget",customTarget:this.getCalendar()}})},remove:function(a,b){a.hide();X.CalendarManager.DeleteRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Deleting,target:"customtarget",customTarget:this.getCalendar()}})},edit:function(a,b){a.hide();CompanyX.getCalendar().showEditForm(b)},addDetail:function(a,b){X.CalendarManager.AddRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Saving,target:"customtarget",customTarget:this.getCalendar()}})},updateDetail:function(a,b){X.CalendarManager.UpdateRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Updating,target:"customtarget",customTarget:this.getCalendar()}})},removeDetail:function(a,b){X.CalendarManager.DeleteRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Deleting,target:"customtarget",customTarget:this.getCalendar()}})},resize:function(a,b){X.CalendarManager.ResizeRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Updating,target:"customtarget",customTarget:this.getCalendar()}})},move:function(a,b){X.CalendarManager.MoveRecord(Ext.encode(b.data),{eventMask:{showMask:true,msg:LanguageSet.Updating,target:"customtarget",customTarget:this.getCalendar()}})},show:function(b,c,a){CompanyX.getWindow().show(c,a)},saveAll:function(){CompanyX.getStore().submitData()}},doRemind:function(){var b=CompanyX.getStore(),d,a,c=Ext.calendar.EventMappings;b.each(function(e){d=e.data[c.Reminder.name];if(!Ext.isEmpty(d)){d=parseInt(d)*60*1000;a=e.data[c.StartDate.name].getTime()-(new Date()).getTime();if(a>=0&&a<=d){X.CalendarManager.ShowReminder(e.data[c.Title.name],e.data[c.StartDate.name].format("Y/m/d H:i"))}}})},localize:{editWin:function(b){b.fbar.items.get(0).text=String.format('<a href="#" id="tblink">{0}</a>',LanguageSet.EditDetail);b.fbar.items.get(2).text=LanguageSet.Save;b.fbar.items.get(3).text=LanguageSet.Delete;b.fbar.items.get(4).text=LanguageSet.Cancel;var d=b.formPanel.get("title"),a=b.formPanel.get("date-range"),c=b.formPanel.get("calendar");d.fieldLabel=LanguageSet.Title;a.fieldLabel=LanguageSet.Date;a.toText="~";a.allDayText=LanguageSet.DateRange;c.fieldLabel=LanguageSet.Calendar},editForm:function(e){var c=e.get(e.id+"-edit");c.fbar.items.get(0).text=LanguageSet.Save;c.fbar.items.get(1).text=LanguageSet.Delete;c.fbar.items.get(2).text=LanguageSet.Cancel;var a=c.get("left-col").items.get(0),d=c.get("left-col").items.get(1),h=c.get("left-col").items.get(2),f=c.get("left-col").items.get(3),g=c.get("right-col").items.get(0),i=c.get("right-col").items.get(1),b=c.get("right-col").items.get(2);a.fieldLabel=LanguageSet.Title;d.fieldLabel=LanguageSet.Date;d.toText="~";d.allDayText=LanguageSet.DateRange;h.fieldLabel=LanguageSet.Calendar;f.fieldLabel=LanguageSet.Reminder;g.fieldLabel=LanguageSet.Notes;i.fieldLabel=LanguageSet.Location;b.fieldLabel=LanguageSet.WebLink}}};
