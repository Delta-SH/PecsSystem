Ext.ns("X");Ext.Ajax.timeout=300000;Ext.net.DirectEvent.timeout=300000;Ext.data.Connection.override({timeout:300000});var PageSize={width:parseInt(Ext.getBody().getViewSize().width,10),height:parseInt(Ext.getBody().getViewSize().height,10)};var EnmNodeType={Null:-3,LSC:-2,Area:-1,Sta:0,Dev:1,Dic:2,Aic:3,Doc:4,Aoc:5,Str:6,Img:7,Sic:9,SS:10,RS:11,RTU:12};var EnmAlarmLevel={NoAlarm:0,Critical:1,Major:2,Minor:3,Hint:4};var EnmState={NoAlarm:0,Critical:1,Major:2,Minor:3,Hint:4,Opevent:5,Invalid:6};var EnmAction={Init:0,Data:1,Null:2};var curTreePanel=null;var curNodesPanel=null;var curNode=null;var lastNodeType=null;var ACSAction=EnmAction.Init;var ACVAction=EnmAction.Init;var navFilterSearch=function(d,f){var c=TreeTriggerField,g=c.getRawValue();if(Ext.isEmpty(g,false)){return false}if(c._filterData!=null&&c._filterIndex!=null){var b=c._filterIndex+1;var a=c._filterData;if(b>=a.length){b=0}expandChildren(a[b]);c._filterIndex=b}else{X.Home.ConvertNodeNameToTreeID(g,{success:function(h){if(!Ext.isEmpty(h,false)){var i=Ext.util.JSON.decode(h,true);if(i){var e=i.length;if(e>0){expandChildren(i[0]);c._filterData=i;c._filterIndex=0}else{Ext.Msg.show({title:LanguageSet.SystemTip,msg:String.format(LanguageSet.SearchTip,g),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,minWidth:250})}}else{Ext.Msg.show({title:LanguageSet.SystemTip,msg:String.format(LanguageSet.SearchTip,g),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,minWidth:250})}}else{Ext.Msg.show({title:LanguageSet.SystemTip,msg:String.format(LanguageSet.SearchTip,g),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,minWidth:250})}}})}};var udFilterSearch=function(d,f){var c=UserDefindTriggerField,g=c.getRawValue();if(Ext.isEmpty(g,false)){return false}if(c._filterData!=null&&c._filterIndex!=null){var b=c._filterIndex+1;var a=c._filterData;if(b>=a.length){b=0}expandChildren(a[b]);c._filterIndex=b}else{X.Home.ConvertUDNodeNameToTreeID(g,{success:function(h){if(!Ext.isEmpty(h,false)){var i=Ext.util.JSON.decode(h,true);if(i){var e=i.length;if(e>0){expandChildren(i[0]);c._filterData=i;c._filterIndex=0}else{Ext.Msg.show({title:LanguageSet.SystemTip,msg:String.format(LanguageSet.SearchTip,g),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,minWidth:250})}}else{Ext.Msg.show({title:LanguageSet.SystemTip,msg:String.format(LanguageSet.SearchTip,g),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,minWidth:250})}}else{Ext.Msg.show({title:LanguageSet.SystemTip,msg:String.format(LanguageSet.SearchTip,g),buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO,minWidth:250})}}})}};var treeFilterChange=function(b,c,a){delete b._filterData;delete b._filterIndex};var onTreeItemClick=function(a,b){curNode=a;if(typeof(b)!="undefined"){clearNodesGridStore();ACSAction=EnmAction.Init;ACVAction=EnmAction.Init}switch(curNode.attributes.TreeNodeType){case EnmNodeType.Null:if(lastNodeType!=EnmNodeType.Null){addNodesTab([]);lastNodeType=EnmNodeType.Null}clearNodesGridStore();break;case EnmNodeType.LSC:if(lastNodeType!=EnmNodeType.LSC){addNodesTab([NodesGridTabPanel6,NodesGridTabPanel7]);lastNodeType=EnmNodeType.LSC}loadNodesGridStore();break;case EnmNodeType.Area:if(lastNodeType!=EnmNodeType.Area){addNodesTab([NodesGridTabPanel6,NodesGridTabPanel7,NodesGridTabPanel8]);lastNodeType=EnmNodeType.Area}loadNodesGridStore();break;case EnmNodeType.Sta:if(lastNodeType!=EnmNodeType.Sta){addNodesTab([NodesGridTabPanel6,NodesGridTabPanel8]);lastNodeType=EnmNodeType.Sta}loadNodesGridStore();break;case EnmNodeType.Dev:if(lastNodeType!=EnmNodeType.Dev){addNodesTab([NodesGridTabPanel1,NodesGridTabPanel2,NodesGridTabPanel3,NodesGridTabPanel4,NodesGridTabPanel5,NodesGridTabPanel8]);lastNodeType=EnmNodeType.Dev}loadNodesGridStore();break;default:break}if(typeof(b)=="undefined"){return false}};var clearNodesGridStore=function(){if(NodesGridStore1.data.length>0){NodesGridStore1.removeAll()}if(NodesGridStore2.data.length>0){NodesGridStore2.removeAll()}if(NodesGridStore3.data.length>0){NodesGridStore3.removeAll()}if(NodesGridStore4.data.length>0){NodesGridStore4.removeAll()}if(NodesGridStore5.data.length>0){NodesGridStore5.removeAll()}if(NodesGridStore6.data.length>0){NodesGridStore6.removeAll()}if(NodesGridStore7.data.length>0){NodesGridStore7.removeAll()}};var clearNodesTab=function(){var a=NodesTabPanel;a.items.each(function(b){a.closeTab(b)},this)};var addNodesTab=function(a){var c=NodesTabPanel;c.activeLock=true;clearNodesTab();for(var b=0;b<a.length;b++){c.addTab(a[b])}if(a.length>0){c.setActiveTab(a[0])}c.activeLock=false};var onNodesGridTabPanelActivate=function(a){curNodesPanel=a;if(NodesTabPanel.activeLock){return false}if(a==NodesGridTabPanel7){a.doLayout()}if(curNode&&curTreePanel){curTreePanel.fireEvent("click",curNode)}};var loadNodesGridStore=function(){if(!curNode||!curNodesPanel){return false}var a=curNode.attributes.TreeNodeType;switch(curNodesPanel){case NodesGridTabPanel1:if(a==EnmNodeType.Dev){X.Home.GetNodes(curNode.id,EnmNodeType.Null)}break;case NodesGridTabPanel2:if(a==EnmNodeType.Dev){X.Home.GetNodes(curNode.id,EnmNodeType.Dic)}break;case NodesGridTabPanel3:if(a==EnmNodeType.Dev){X.Home.GetNodes(curNode.id,EnmNodeType.Doc)}break;case NodesGridTabPanel4:if(a==EnmNodeType.Dev){X.Home.GetNodes(curNode.id,EnmNodeType.Aic)}break;case NodesGridTabPanel5:if(a==EnmNodeType.Dev){X.Home.GetNodes(curNode.id,EnmNodeType.Aoc)}break;case NodesGridTabPanel6:if(a==EnmNodeType.Sta||a==EnmNodeType.Area||a==EnmNodeType.LSC){if(ACSAction==EnmAction.Init){X.Home.SetACSFilterGrid(curNode.id,a,{success:function(b){ACSAction=EnmAction.Data;X.Home.SetACSFilterData(curNode.id,a)}})}else{if(ACSAction==EnmAction.Data){X.Home.SetACSFilterData(curNode.id,a)}}}break;case NodesGridTabPanel7:if(a==EnmNodeType.Area||a==EnmNodeType.LSC){if(ACVAction==EnmAction.Init){X.Home.SetACVFilterGrid(curNode.id,a,{success:function(b){ACVAction=EnmAction.Data;NodesGridTabPanel7.doLayout();NodesGridTabPanel7PagingToolbar.doLoad()}})}else{if(ACVAction==EnmAction.Data){NodesGridTabPanel7PagingToolbar.doRefresh()}}}break;case NodesGridTabPanel8:break;default:break}};var prepareCommand=function(b,d,a,c){switch(a.data.NodeType){case EnmNodeType.Doc:if(d.command==="Set"){d.hidden=true;d.hideMode="display"}break;case EnmNodeType.Aoc:if(d.command==="Ctrl"){d.hidden=true;d.hideMode="display"}break;default:d.hidden=true;d.hideMode="display";break}if(d.command==="Cam"){d.hidden=Ext.isEmpty(a.data.CamUrl);d.hideMode="display"}};var onNodesGridTabPanelCmdClick=function(c,a,d,b){if(c==="Cam"){window.open(a.data.CamUrl,"_blank")}else{X.Home.ShowControlWindow(c,a.data.LscID,a.data.NodeID,a.data.NodeType,a.data.NodeName)}};var activeTreeTab=function(a){curTreePanel=a;clearNodesGridStore();curNode=curTreePanel.getSelectionModel().getSelectedNode();if(curNode){ACSAction=EnmAction.Init;ACVAction=EnmAction.Init;a.fireEvent("click",curNode)}else{addNodesTab([]);lastNodeType=EnmNodeType.Null}};var onUserDefindTreePanelMenuShow=function(a,b){var c=a.getDepth();if(c>0){a.select();UserDefindTreePanelMenu.node=a;UserDefindTreePanelMenu.showAt(b.getXY());if(c==2){UserDefindTreePanelMenuItem2.setDisabled(false);UserDefindTreePanelMenuItem3.setDisabled(false)}else{UserDefindTreePanelMenuItem2.setDisabled(true);UserDefindTreePanelMenuItem3.setDisabled(true)}}};var delUserDefindGroup=function(a,c){var b=a.parentMenu.node;X.Home.DelUserDefindGroup(b.id,{success:function(d){if(d){b.remove(true);setUDGroupTreeIcons()}},eventMask:{showMask:true,target:"customtarget",customTarget:UserDefindTreePanel}})};var loadUserDefindGroups=function(){X.Home.InitUserDefindTreeNodes({success:function(a){if(!Ext.isEmpty(a,false)){var b=Ext.util.JSON.decode(a,true);if(b&&b.length>0){UserDefindTreePanel.initChildren(b)}else{UserDefindTreePanel.getRootNode().removeChildren()}setUDGroupTreeIcons()}},eventMask:{showMask:true,target:"customtarget",customTarget:UserDefindTreePanel}})};var getCurNodeId=function(){if(curNode){return curNode.id}return""};var getCurNodeType=function(){if(curNode){return curNode.attributes.TreeNodeType}return""};var getCurNodeName=function(){if(curNode){return curNode.text}return""};var getNodesExportTitle=function(a){if(curNode&&curNode.isLeaf()){return curNode.text+a.title}return""};var onNodesExportClick=function(a,b){if(!curNodesPanel){return false}if(curNodesPanel==NodesGridTabPanel1||curNodesPanel==NodesGridTabPanel2||curNodesPanel==NodesGridTabPanel3||curNodesPanel==NodesGridTabPanel4||curNodesPanel==NodesGridTabPanel5||curNodesPanel==NodesGridTabPanel6){curNodesPanel.submitData(false)}else{if(curNodesPanel==NodesGridTabPanel7){exportACVGridNodes()}}};var onNodesGridRowContextMenuShow=function(b,d,c){c.preventDefault();b.getSelectionModel().selectRow(d);NodesGridRowMenu.dataRecord=b.store.getAt(d);NodesGridRowMenu.showAt(c.getXY());var a=b.store.getAt(d).data.NodeType;if(a==EnmNodeType.Dic||a==EnmNodeType.Aic){NodesGridRowItem1.setDisabled(false);NodesGridRowItem2.setDisabled(false);NodesGridRowItem3.setDisabled(false)}else{NodesGridRowItem1.setDisabled(true);NodesGridRowItem2.setDisabled(true);NodesGridRowItem3.setDisabled(true)}};var onACSGridCellContextMenuShow=function(b,d,a,c){c.preventDefault();b.getSelectionModel().select(d,a,false,false);ACSRowMenu.dataRecord=b.store.getAt(d);ACSRowMenu.showAt(c.getXY())};var onACVGridCellContextMenuShow=function(a,h,g,f){f.preventDefault();a.getSelectionModel().select(h,g,false,false);var j=ACVRowStore,d=j.getAt(h),i=a.getColumnModel().getDataIndex(g),b=d.get(i);if(Ext.isEmpty(b,false)||i==="Data0"||i==="Data1"||i==="Data2"){ACVRowItem1.setDisabled(true);ACVRowItem2.setDisabled(true);ACVRowItem3.setDisabled(true)}else{var c=b.split(";");if(c.length!=2&&c.length!=3){ACVRowItem1.setDisabled(true);ACVRowItem2.setDisabled(true);ACVRowItem3.setDisabled(true)}else{ACVRowItem1.setDisabled(false);ACVRowItem2.setDisabled(false);ACVRowItem3.setDisabled(false);ACVRowMenu.dataRecord=new Ext.data.Record({LscID:c[0],NodeID:c[1]})}}ACVRowMenu.showAt(f.getXY())};var onACSGridCellDblClick=function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dataIndex==="Data0"||b.dataIndex==="Data1"||b.dataIndex==="Data2"){return false}var a=d.store.getAt(h);if(a){var g=String.format("{0} [{1}]{2}",a.data.Data1,b.header,LanguageSet.AlarmWndName);X.Home.ShowACSFilterDetail(g,h,b.dataIndex)}};var onACVGridCellDblClick=function(c,j,i,h){var k=c.getColumnModel().getDataIndex(i);if(k==="Data0"||k==="Data1"||k==="Data2"){return false}var f=ACVRowStore.getAt(j),d=f.get(k);if(Ext.isEmpty(d,false)){return false}var g=d.split(";");if(g.length!=2&&g.length!=3){return false}var a=NodesGridTabPanel1,b=g[1];a.view.on("refresh",function(l){var e=l.grid.getStore();if(!Ext.isEmpty(e)&&!Ext.isEmpty(b)){var m=e.find("NodeID",b);if(m!=-1){l.grid.getSelectionModel().selectRow(m);l.focusRow(m)}}},this,{single:true,delay:500});if(g.length==2){X.Home.ConvertNodeIDToTreeID(g[0],g[1],{success:function(e){if(!Ext.isEmpty(e,false)){var l=Ext.util.JSON.decode(e,true);if(l){expandChildren(l)}}}})}else{X.Home.ConvertUDNodeIDToTreeID(g[0],g[1],g[2],{success:function(e){if(!Ext.isEmpty(e,false)){var l=Ext.util.JSON.decode(e,true);if(l){expandChildren(l)}}}})}};var exportACVGridNodes=function(a,b){X.Home.PreExportACVNodes(curNode.id,curNode.text,curNode.attributes.TreeNodeType,{success:function(c){X.Home.ExportACVNodes(getGridColumnNames(NodesGridTabPanel7),curNode.text,{isUpload:true})},eventMask:{showMask:true,target:"customtarget",msg:LanguageSet.Exporting,customTarget:NodesGridTabPanel7}})};var getGridColumnNames=function(c){var a="<Names>";if(c){var b=c.getColumnModel().config;Ext.each(b,function(d){if(!d.hidden&&!Ext.isEmpty(d.dataIndex,false)){a+='<Name DataIndex="'+d.dataIndex+'" Header="'+d.header+'" />'}})}a+="</Names>";return a};var doProjName=function(a){return !Ext.isEmpty(a,false)?LanguageSet.BooleanTrue:LanguageSet.BooleanFalse};var doMAlm=function(a){return a==="MAlm"?LanguageSet.BooleanTrue:LanguageSet.BooleanFalse};var doConn=function(a){return a==="Conn"?LanguageSet.BooleanTrue:LanguageSet.BooleanFalse};var setGridRowColor=function(a){switch(a.data.AlarmLevel){case EnmAlarmLevel.NoAlarm:return"grid-bg-NoAlarm";case EnmAlarmLevel.Critical:return"grid-bg-Critical";case EnmAlarmLevel.Major:return"grid-bg-Major";case EnmAlarmLevel.Minor:return"grid-bg-Minor";case EnmAlarmLevel.Hint:return"grid-bg-Hint";default:return"grid-bg-NoAlarm"}};var setNodesColor=function(a){switch(a.data.Status){case EnmState.NoAlarm:return"grid-bg-NoAlarm";case EnmState.Critical:return"grid-bg-Critical";case EnmState.Major:return"grid-bg-Major";case EnmState.Minor:return"grid-bg-Minor";case EnmState.Hint:return"grid-bg-Hint";case EnmState.Opevent:return"grid-bg-Opevent";case EnmState.Invalid:return"grid-bg-Invalid";default:return"grid-bg-NoAlarm"}};var setAlarmsColor=function(a){if(!ViewMenuItem5.checked){return false}return setGridRowColor(a)};var setAlarmsInterpretTips=function(e,c,a,f,d,b){c.attr="ext:hide='false' ext:qtip='"+a.data.AlarmInterpret+"'";return a.data.AlarmInterpret};var onAlarmsGridRowContextMenuShow=function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);AlarmsGridRowMenu.dataRecord=a.store.getAt(c);if(AlarmsGridRowMenu.dataRecord.data.MAlm==="MAlm"){AlarmsGridRowItem3.setDisabled(false)}else{AlarmsGridRowItem3.setDisabled(true)}AlarmsGridRowMenu.showAt(b.getXY())};var onAlarmsFinderClick=function(a){var b=a.parentMenu.dataRecord.data.LscID;var c=a.parentMenu.dataRecord.data.NodeID;if(!b||!c){return false}if(curTreePanel!=NavTreePanel){curNode=null;NavPanel.setActiveTab(NavTreePanel)}X.Home.ConvertNodeIDToTreeID(b,c,{success:function(d){if(!Ext.isEmpty(d,false)){var e=Ext.util.JSON.decode(d,true);if(e){expandChildren(e)}}}})};var onMenuAlarmsFinderClick=function(){if(!AlarmsGridPanel.hasSelection()){return false}var a=AlarmsGridPanel.getSelectionModel().getSelected();if(!a){return false}var b=a.data.LscID;var c=a.data.NodeID;if(!b||!c){return false}if(curTreePanel!=NavTreePanel){curNode=null;NavPanel.setActiveTab(NavTreePanel)}X.Home.ConvertNodeIDToTreeID(b,c,{success:function(d){if(!Ext.isEmpty(d,false)){var e=Ext.util.JSON.decode(d,true);if(e){expandChildren(e)}}}})};var expandChildren=function(b,a){a=a||0;var c=curTreePanel.getNodeById(b[a]);if(c){if(b.length-1==a){c.ensureVisible(function(){c.select();curNode=c;doNodesGridLoad()})}else{c.expand(false,false,expandChildren.createDelegate(this,[b,++a]))}}};var doPageRefresh=function(a){a=a||15;if(a&1>0){doAlarmsGridPageLoad()}if(a&2>0){doNodesGridLoad()}if(a&4>0){setGroupTreeIcons()}if(a&8>0){setUDGroupTreeIcons()}};var doAlarmsGridLoad=function(){AlarmsGridPagingToolbar.doLoad()};var doAlarmsGridPageLoad=function(){AlarmsGridPagingToolbar.doRefresh()};var doNodesGridLoad=function(){if(curNode&&curTreePanel){curTreePanel.fireEvent("click",curNode)}};var setGroupTreeIcons=function(){X.Home.GetTreeIcons({success:function(b){if(!Ext.isEmpty(b,false)){var e=Ext.util.JSON.decode(b,true);if(e){var a=NavTreePanel;var d=a.getRootNode();var c=e.iconCls;if(d&&c){var f=e[d.id];if(f){d.setIconCls(f)}else{d.setIconCls(c)}if(d.hasChildNodes()){d.eachChild(function(g){g.cascade(function(i){var h=e[i.id];if(h){i.setIconCls(h)}else{i.setIconCls(c)}})})}}}}}})};var setUDGroupTreeIcons=function(){X.Home.GetUDGTreeIcons({success:function(b){if(!Ext.isEmpty(b,false)){var e=Ext.util.JSON.decode(b,true);if(e){var a=UserDefindTreePanel;var d=a.getRootNode();var c=e.iconCls;if(d&&c){var f=e[d.id];if(f){d.setIconCls(f)}else{d.setIconCls(c)}if(d.hasChildNodes()){d.eachChild(function(g){g.cascade(function(i){var h=e[i.id];if(h){i.setIconCls(h)}else{i.setIconCls(c)}})})}}}}}})};var setConfirmAlarm=function(){if(AlarmsGridPanel.hasSelection()){var a=AlarmsGridPanel.getSelectionModel().getSelected();X.Home.SetConfirmAlarm(a.data.LscID,a.data.SerialNO,a.data.ConfirmMarking)}};var setPageConfirmAlarms=function(){X.Home.SetPageConfirmAlarms(AlarmsGridPagingToolbar.cursor,AlarmsGridPagingToolbar.pageSize)};var setAllConfirmAlarms=function(){X.Home.SetAllConfirmAlarms()};var onLSCPanelCmdClick=function(c,a,d,b){X.LSCManager.ShowCmdWindow(c,a.data.LscID,a.data.LscName,a.data.LscIP,a.data.LscPort,a.data.LscUID,a.data.LscPwd,a.data.BeatInterval,a.data.BeatDelay,a.data.DBServer,a.data.DBPort,a.data.DBName,a.data.DBUID,a.data.DBPwd,a.data.HisDBServer,a.data.HisDBPort,a.data.HisDBName,a.data.HisDBUID,a.data.HisDBPwd,a.data.Enabled,{success:function(e){FormPanel1.clearInvalid();FormPanel2.clearInvalid()}})};var onLSCPanelAddClick=function(){X.LSCManager.ShowCmdWindow("Add",0,"","",7000,"","",20,20,"",1433,"","","","",1433,"","","",true,{success:function(a){FormPanel1.clearInvalid();FormPanel2.clearInvalid()}})};var onLSCPanelRefreshClick=function(){LSCPagingToolbar.doRefresh()};var onLSCGridRowEditClick=function(a){onLSCPanelCmdClick("Edit",a.parentMenu.dataRecord,0,0)};var onLSCGridRowDeleteClick=function(a){onLSCPanelCmdClick("Del",a.parentMenu.dataRecord,0,0)};var onLSCGridRowSyncClick=function(a){onLSCPanelCmdClick("Sync",a.parentMenu.dataRecord,0,0)};var onLSCGridRowContextMenuShow=function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);LSCGridRowMenu.dataRecord=a.store.getAt(c);LSCGridRowMenu.showAt(b.getXY())};var setLSCStatus=function(b){var a='<img alt="{0}" title="{0}" src="{1}" width="16" height="16" />';return String.format(a,b?LanguageSet.Connected:LanguageSet.Disconnected,b?"Resources/images/Tips/T-Connected.png":"Resources/images/Tips/T-Disconnected.png")};var setNavPanelWidth=function(a){a.setWidth(PageSize.width*0.25)};var setAlarmPanelHeight=function(a){a.setHeight((PageSize.height-113)*0.5)};var setCollapseChecked=function(a){if(a.checked){a.setChecked(false)}};var setExpandChecked=function(a){if(!a.checked){a.setChecked(true)}};var openNewPage=function(a){var b=document.createElement("a");b.setAttribute("href",encodeURI(a));b.setAttribute("target","_blank");b.setAttribute("id","createNewPageLink");document.body.appendChild(b);b.click()};var newColsCnt;var createColumnTreePanel=function(b,a){newColsCnt=0;X.ACSFilterSetting.CreateTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){ColumnTreePanel.initChildren(d)}else{ColumnTreePanel.getRootNode().removeChildren()}ColumnPropertyGrid1.setVisible(false);ColumnPropertyGrid2.setVisible(false);ColumnPropertyGrid3.setVisible(false)}},eventMask:{showMask:true,target:"customtarget",customTarget:ColumnTreePanel}})};var addColumnTreeNode=function(a,b){if(LscsComboBox.store.getCount()==0){return false}X.ACSFilterSetting.AddTreeNode(++newColsCnt,{success:function(d){if(!Ext.isEmpty(d,false)){var e=Ext.util.JSON.decode(d,true);if(e&&e.length>0){var c=ColumnTreePanel;c.getRootNode().appendChild(e);var f=c.getNodeById(e[0].id);if(f){c.fireEvent("click",f)}}}}})};var removeColumnTreeNode=function(c,f){var b=ColumnTreePanel;var d=b.getSelectionModel().getSelectedNode();if(d){b.removeNode(d);var a=b.getRootNode().childNodes.length;if(a>0){b.fireEvent("click",b.getRootNode().childNodes[a-1])}else{ColumnPropertyGrid1.setVisible(false);ColumnPropertyGrid2.setVisible(false);ColumnPropertyGrid3.setVisible(false)}}};var resetColumnTreeNode=function(a,b){createColumnTreePanel()};var onColumnTreeItemClick=function(a,b){X.ACSFilterSetting.SetPropertyGrid(a.text,a.attributes.filterType,a.attributes.filterItem,a.attributes.isNew,{eventMask:{showMask:true,target:"customtarget",customTarget:TCEastPanel}})};var onColumnPropertyChanged=function(f){var a=ColumnTreePanel;var b=f.grid,h=f.record.data.name,d=f.value,c=a.getSelectionModel().getSelectedNode();if(c&&b){switch(h){case"ColName":c.setText(d);break;case"FilterType":c.attributes.filterType=d;c.attributes.filterItem="";a.fireEvent("click",c);break;case"FilterItem":c.attributes.filterItem=d;break;case"FilterItem1":var g=b.getSource()["FilterItem2"];g=Ext.isEmpty(g,false)?0:g;X.ACSFilterSetting.GetDateTimeString(d,g,{success:function(e){if(!Ext.isEmpty(e,false)){c.attributes.filterItem=e}}});break;case"FilterItem2":var i=b.getSource()["FilterItem1"];i=Ext.isEmpty(i,false)?0:i;X.ACSFilterSetting.GetDateTimeString(i,d,{success:function(e){if(!Ext.isEmpty(e,false)){c.attributes.filterItem=e}}});break;default:break}}};var createACVColumnTreePanel=function(b,a){newColsCnt=0;X.ACVFilterSetting.CreateTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){ColumnTreePanel.initChildren(d)}else{ColumnTreePanel.getRootNode().removeChildren()}ColumnPropertyGrid.setVisible(false)}},eventMask:{showMask:true,target:"customtarget",customTarget:ColumnTreePanel}})};var onACVColumnTreeItemClick=function(a,b){ColumnPropertyGrid.setProperty("ColName",a.text);ColumnPropertyGrid.setProperty("DevName",a.attributes.devName);ColumnPropertyGrid.setProperty("NodeType",a.attributes.vNodeType);ColumnPropertyGrid.setProperty("FilterType",a.attributes.filterType);ColumnPropertyGrid.setProperty("FilterItem",a.attributes.filterItem);ColumnPropertyGrid.setVisible(true)};var addACVColumnTreeNode=function(a,b){if(LscsComboBox.store.getCount()==0){return false}X.ACVFilterSetting.AddTreeNode(++newColsCnt,{success:function(d){if(!Ext.isEmpty(d,false)){var e=Ext.util.JSON.decode(d,true);if(e&&e.length>0){var c=ColumnTreePanel;c.getRootNode().appendChild(e);var f=c.getNodeById(e[0].id);if(f){c.fireEvent("click",f)}}}}})};var removeACVColumnTreeNode=function(c,f){var b=ColumnTreePanel;var d=b.getSelectionModel().getSelectedNode();if(d){b.removeNode(d);var a=b.getRootNode().childNodes.length;if(a>0){b.fireEvent("click",b.getRootNode().childNodes[a-1])}else{ColumnPropertyGrid.setVisible(false)}}};var resetACVColumnTreeNode=function(a,b){createACVColumnTreePanel()};var onACVColumnPropertyChanged=function(c){var d=c.record.data.name,b=c.value,a=ColumnTreePanel.getSelectionModel().getSelectedNode();if(a){switch(d){case"ColName":a.setText(b);break;case"DevName":a.attributes.devName=b;break;case"NodeType":a.attributes.vNodeType=b;break;case"FilterType":a.attributes.filterType=b;break;case"FilterItem":a.attributes.filterItem=b;break;default:break}}};var HisAlarms={setGridRowClass:function(a){if(!AlarmsGridRowItem1.checked){return false}return setGridRowColor(a)},showGridRowContextMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);HisAlarmsGridRowMenu.dataRecord=a.store.getAt(c);if(HisAlarmsGridRowMenu.dataRecord.data.MAlm==="MAlm"){AlarmsGridRowItem3.setDisabled(false)}else{AlarmsGridRowItem3.setDisabled(true)}HisAlarmsGridRowMenu.showAt(b.getXY())},collapseChecked:function(){AlarmsGridRowItem2.setChecked(false)},expandChecked:function(){AlarmsGridRowItem2.setChecked(true)},showSubPanel:function(a,b){if(a.checked){SubAlarmsPanel.expand()}else{SubAlarmsPanel.collapse()}}};var AlarmWnd={setGridRowClass:function(a){if(!AlarmWndGridRowItem2.checked){return false}return setGridRowColor(a)},showGridRowContextMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);AlarmWndGridRowMenu.dataRecord=a.store.getAt(c);AlarmWndGridRowMenu.showAt(b.getXY())},collapseChecked:function(){AlarmWndGridRowItem3.setChecked(false)},expandChecked:function(){AlarmWndGridRowItem3.setChecked(true)},showSubPanel:function(a,b){if(a.checked){AlarmWndSubPanel.expand()}else{AlarmWndSubPanel.collapse()}}};var HisCategory={onGridContextMenuShow:function(b,d,a,c){c.preventDefault();b.getSelectionModel().select(d,a,false,false);HisCategoryContextMenu.dataRecord=b.store.getAt(d);HisCategoryContextMenu.showAt(c.getXY())},onGridCellDblClick:function(b,h,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled==="0"){return false}var a=b.store.getAt(h);if(a){h=a.data.Data0-1;var g=String.format("{0} {1}{2}",a.data.Data2,c.header,LanguageSet.AlarmWndName);X.HisAlarmsCategory.ShowGridCellDetail(g,h,c.dataIndex)}}};var SysLogs={setMessageTips:function(e,c,a,f,d,b){c.attr="ext:hide='false' ext:qtip='"+a.data.Message+"'";return a.data.Message}};var ServiceLogs={setMessageTips:function(e,c,a,f,d,b){c.attr="ext:hide='false' ext:qtip='"+a.data.Message+"'";return a.data.Message}};var AppointMgr={onGridCmdClick:function(c,a,d,b){this.ShowCmdWindow(c,a.data.LscID,a.data.Id)},onGridAddClick:function(){this.ShowCmdWindow("Add",0,0)},ShowCmdWindow:function(b,a,c){X.AppointmentManager.ShowCmdWindow(b,a,c,{success:function(d){AppointmentFormPanel.clearInvalid()}})},initStaTreePanel:function(){var a=StaIncludedField.component;if(a.rendered){X.AppointmentManager.InitStaTreePanel({success:function(b){if(!Ext.isEmpty(b,false)){var c=Ext.util.JSON.decode(b,true);if(c&&c.length!=0){a.initChildren(c)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},initDevTreePanel:function(){var a=DevIncludedField.component;if(a.rendered){X.AppointmentManager.InitDevTreePanel({success:function(b){if(!Ext.isEmpty(b,false)){var c=Ext.util.JSON.decode(b,true);if(c&&c.length>0){a.initChildren(c)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},LscChanged:function(c,a,b){StaIncludedField.setValue("","",false);DevIncludedField.setValue("","",false);AppointMgr.initStaTreePanel();AppointMgr.initDevTreePanel();BookingUserNameTextField.setValue(a.data.LscUserName);BookingUserPhoneTextField.setValue(a.data.LscUserMobilePhone);LscCheckbox.setValue(false);WProjectComboBox.clearValue();WProjectComboBox.store.reload()},ProjectLoaded:function(b,a,c){if(b.getCount()==0){return false}var e=JsonValueHF.getValue();if(!Ext.isEmpty(e,false)){var d=Ext.util.JSON.decode(e,true);if(!Ext.isEmpty(d,false)){WProjectComboBox.setValueAndFireSelect(d.ProjectId)}else{WProjectComboBox.setValueAndFireSelect(b.getAt(0).get("Id"))}}else{WProjectComboBox.setValueAndFireSelect(b.getAt(0).get("Id"))}},ProjectChanged:function(e,a,b){var d=JsonValueHF.getValue();if(!Ext.isEmpty(d,false)){var c=Ext.util.JSON.decode(d,true);if(!Ext.isEmpty(c,false)){if(!Ext.isEmpty(c.StaIncluded,false)){StaIncludedField.setValue(c.StaIncluded,c.StaIncluded)}if(!Ext.isEmpty(c.DevIncluded,false)){DevIncludedField.setValue(c.DevIncluded,c.DevIncluded)}StartTimeTextField.setValue(Ext.util.Format.date(c.StartTime,"Y-m-d H:i:s"));EndTimeTextField.setValue(Ext.util.Format.date(c.EndTime,"Y-m-d H:i:s"));BookingUserNameTextField.setValue(c.BookingUserName);BookingUserPhoneTextField.setValue(c.BookingUserPhone);LscCheckbox.setValue(c.LscIncluded>0)}}},Save:function(a,b){if(!AppointmentFormPanel.getForm().isValid()){return false}if(Ext.isEmpty(StaIncludedField.getValue(),false)&&Ext.isEmpty(DevIncludedField.getValue(),false)&&!LscCheckbox.getValue()){AppointmentStatusBar.setStatus({text:LanguageSet.InvalidForm,iconCls:"icon-exclamation"});return false}AppointmentStatusBar.setStatus({text:LanguageSet.Saving,iconCls:"icon-loading"});X.AppointmentManager.Save({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d){if(d.Status==200){AppointmentStatusBar.setStatus({text:d.Msg,iconCls:"icon-tick"});AppointmentGridPagingToolbar.doLoad()}else{AppointmentStatusBar.setStatus({text:d.Msg,iconCls:"icon-exclamation"})}}}}})}};var SpSetting={CurNode:null,Lock:false,OnSpTreeItemClick:function(a,b){this.CurNode=a;this.Lock=true;DisConnectEnabled.setValue(a.attributes.SpDisconnect==="True"?true:false);AL1Enabled.setValue(a.attributes.AL1Enabled==="True"?true:false);AL2Enabled.setValue(a.attributes.AL2Enabled==="True"?true:false);AL3Enabled.setValue(a.attributes.AL3Enabled==="True"?true:false);AL4Enabled.setValue(a.attributes.AL4Enabled==="True"?true:false);DevNameField.setValue(a.attributes.SpDevFilter);NodeNameField.setValue(a.attributes.SpNodeFilter);LoopEnabled.setValue(a.attributes.SpLoop==="True"?true:false);SpArea2.setValue(a.attributes.SpArea2==="True"?true:false);SpArea3.setValue(a.attributes.SpArea3==="True"?true:false);SpStation.setValue(a.attributes.SpStation==="True"?true:false);SpDevice.setValue(a.attributes.SpDevice==="True"?true:false);SpNode.setValue(a.attributes.SpNode==="True"?true:false);SpALDesc.setValue(a.attributes.SpALDesc==="True"?true:false);this.Lock=false},CreateTreeNodes:function(a,b){X.SpeechSetting.CreateTreeNodes({success:function(d){var c=ColumnTreePanel;if(!Ext.isEmpty(d,false)){var e=Ext.util.JSON.decode(d,true);if(e&&e.length>0){c.initChildren(e);c.fireEvent("click",c.getRootNode().childNodes[0])}else{c.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:ColumnTreePanel}})},DisConnectCheck:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpDisconnect=a.checked?"True":"False"}},AL1Check:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.AL1Enabled=a.checked?"True":"False"}},AL2Check:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.AL2Enabled=a.checked?"True":"False"}},AL3Check:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.AL3Enabled=a.checked?"True":"False"}},AL4Check:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.AL4Enabled=a.checked?"True":"False"}},DevFilter:function(b,c,a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpDevFilter=c}},NodeFilter:function(b,c,a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpNodeFilter=c}},LoopCheck:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpLoop=a.checked?"True":"False"}},Area2Check:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpArea2=a.checked?"True":"False"}},Area3Check:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpArea3=a.checked?"True":"False"}},StationCheck:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpStation=a.checked?"True":"False"}},DeviceCheck:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpDevice=a.checked?"True":"False"}},NodeCheck:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpNode=a.checked?"True":"False"}},ALDescCheck:function(a){if(this.CurNode&&!this.Lock){this.CurNode.attributes.SpALDesc=a.checked?"True":"False"}}};var UDGSetting={checkChange:true,checkChangeLock:false,setUDGroupName:function(a){var b=a.getRootNode();if(b){UDGroupName.setValue(b.text)}},setUDGroupTreeName:function(a,c){var d=a.getRawValue();if(!Ext.isEmpty(d,false)){var b=UDGSettingWestPanel.getRootNode();if(b){b.setText(d)}}},groupNodesCheckChange:function(a,b){if(UDGSetting.checkChangeLock){return false}UDGSetting.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);if(selectAll.checked){a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}}UDGSetting.checkChangeLock=false},previewUDGroupTree:function(c,d){var b=UDGSettingCenterPanel.getRootNode();var a=UDGSettingWestPanel.getRootNode();a.removeAll(true);UDGSetting.previewUDGroupTreeCallback(b,a)},previewUDGroupTreeCallback:function(b,a){if(b&&b.hasChildNodes()){b.eachChild(function(f){var d=a;if(Ext.isDefined(f.attributes.checked)&&f.attributes.checked){var e=f.clone();e.attributes.id=f.id;delete e.attributes.checked;d=d.appendChild(new Ext.tree.TreeNode(e.attributes))}UDGSetting.previewUDGroupTreeCallback(f,d)})}},setGroupNodesFilter:function(a,c){var b=LscIDHidden.getRawValue();if(!Ext.isEmpty(b,false)){X.UserDefindGroupSetting.BuiltGroupNodesTree(b,{success:function(d){if(!Ext.isEmpty(d,false)){var e=Ext.util.JSON.decode(d,true);if(e&&e.length>0){UDGSettingCenterPanel.initChildren(e)}else{UDGSettingCenterPanel.getRootNode().removeChildren()}PreviewBtn.fireEvent("click")}},eventMask:{showMask:true,target:"customtarget",customTarget:UDGSettingCenterPanel}})}},dragUDGGroupNode:function(a){if(a.point==="append"){return false}if(a.dropNode.getDepth()!=a.target.getDepth()){return false}}};var SysKPI={onGridCellDblClick11:function(f,i,d,g){var c=f.getColumnModel().config[d];var b=c.dataIndex;if(b!="DevCnt"&&b!="AlarmLast"&&b!="TotalLast"){return false}var a=f.store.getAt(i);if(a){var h=String.format("{0} {1}",c.header,LanguageSet.AlarmWndName);i=a.data.ID-1;X.SysKPI.ShowGridCellDetail("1x",h,i,b)}},onGridCellDblClick21:function(f,i,d,g){var c=f.getColumnModel().config[d];var b=c.dataIndex;if(b!="AlarmCnt"&&b!="TotalAlarmCnt"){return false}var a=f.store.getAt(i);if(a){var h=String.format("{0} {1}",c.header,LanguageSet.AlarmWndName);i=a.data.ID-1;X.SysKPI.ShowGridCellDetail("2x",h,i,b)}},onGridCellDblClick31:function(f,i,d,g){var c=f.getColumnModel().config[d];var b=c.dataIndex;if(b!="SAlmCnt"&&b!="OriginalBAlmCnt"&&b!="BAlmCnt"&&b!="TotalAlarmCnt"){return false}var a=f.store.getAt(i);if(a){var h=String.format("{0} {1}",c.header,LanguageSet.AlarmWndName);i=a.data.ID-1;X.SysKPI.ShowGridCellDetail("3x",h,i,b)}},onGridCellDblClick41:function(f,i,d,g){var c=f.getColumnModel().config[d];var b=c.dataIndex;if(b!="SAlmCnt"&&b!="OriginalBAlmCnt"&&b!="BAlmCnt"&&b!="TotalAlarmCnt"){return false}var a=f.store.getAt(i);if(a){var h=String.format("{0} {1}",c.header,LanguageSet.AlarmWndName);i=a.data.ID-1;X.SysKPI.ShowGridCellDetail("4x",h,i,b)}},onGridCellDblClick51:function(f,i,d,g){var c=f.getColumnModel().config[d];var b=c.dataIndex;if(b!="TotalAlm"&&b!="ConfirmAlm"){return false}var a=f.store.getAt(i);if(a){var h=String.format("{0} {1}",c.header,LanguageSet.AlarmWndName);i=a.data.ID-1;X.SysKPI.ShowGridCellDetail("5x",h,i,b)}},onGridCellDblClick61:function(f,i,d,g){var c=f.getColumnModel().config[d];var b=c.dataIndex;if(b!="TotalAlm"){return false}var a=f.store.getAt(i);if(a){var h=String.format("{0} {1}",c.header,LanguageSet.AlarmWndName);i=a.data.ID-1;X.SysKPI.ShowGridCellDetail("6x",h,i,b)}}};var StaCnt={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.StaCount.InitStaCountTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(StaCnt.getValues(this),StaCnt.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.StaWndName;if(b.titleStyle==="2"){g=String.format("{0} [{1}]{2}",a.data.Data1,b.header,LanguageSet.StaWndName)}else{if(b.titleStyle==="3"){g=String.format("{0} {1} [{2}]{3}",a.data.Data1,a.data.Data2,b.header,LanguageSet.StaWndName)}else{if(b.titleStyle==="4"){g=String.format("{0} {1} {2} [{3}]{4}",a.data.Data1,a.data.Data2,a.data.Data3,b.header,LanguageSet.StaWndName)}}}X.StaCount.ShowGridCellDetail(g,h,b.dataIndex)}}};var StaWnd={showGridRowContextMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);StaWndGridRowMenu.dataRecord=a.store.getAt(c);StaWndGridRowMenu.showAt(b.getXY())}};var DevCnt={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.DevCount.InitDevCountTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(DevCnt.getValues(this),DevCnt.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.DevWndName;if(b.titleStyle==="2"){g=String.format("{0} [{1}]{2}",a.data.Data1,b.header,LanguageSet.DevWndName)}else{if(b.titleStyle==="3"){g=String.format("{0} {1} [{2}]{3}",a.data.Data1,a.data.Data2,b.header,LanguageSet.DevWndName)}else{if(b.titleStyle==="4"){g=String.format("{0} {1} {2} [{3}]{4}",a.data.Data1,a.data.Data2,a.data.Data3,b.header,LanguageSet.DevWndName)}else{if(b.titleStyle==="5"){g=String.format("{0} {1} {2} {3} [{4}]{5}",a.data.Data1,a.data.Data2,a.data.Data3,a.data.Data4,b.header,LanguageSet.DevWndName)}else{if(b.titleStyle==="6"){g=String.format("{0} {1} {2} {3} {4} [{5}]{6}",a.data.Data1,a.data.Data2,a.data.Data3,a.data.Data4,a.data.Data5,b.header,LanguageSet.DevWndName)}}}}}X.DevCount.ShowGridCellDetail(g,h,b.dataIndex)}}};var DevWnd={showGridRowContextMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);DevWndGridRowMenu.dataRecord=a.store.getAt(c);DevWndGridRowMenu.showAt(b.getXY())}};var DetailWnd120={showGridRowContextMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);WndGridRowMenu.dataRecord=a.store.getAt(c);WndGridRowMenu.showAt(b.getXY())}};var TrendMgr={GetGridRowClass:function(a){if(!TrendGridRowMenuItem3.checked){return false}return setGridRowColor(a)},GetCountGridRowClass:function(a){if(!TrendCountGridRowMenuItem1.checked){return false}return setGridRowColor(a)},GetHisGridRowClass:function(a){if(!TrendHisGridRowMenuItem1.checked){return false}return setGridRowColor(a)},ShowGridRowMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);TrendGridRowMenu.dataRecord=a.store.getAt(c);TrendGridRowMenu.showAt(b.getXY())},ShowCountGridRowMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);TrendCountGridRowMenu.dataRecord=a.store.getAt(c);TrendCountGridRowMenu.showAt(b.getXY())},ShowHisGridRowMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);TrendHisGridRowMenu.dataRecord=a.store.getAt(c);TrendHisGridRowMenu.showAt(b.getXY())},LoadPageTrendAlarms:function(){if(TrendGridToolbars.loaded1&&TrendGridToolbars.loaded2&&TrendGridToolbars.loaded3){TrendGridPagingToolbar.doRefresh()}}};var LoadMgr={GetGridRowClass:function(a){if(!LoadGridRowMenuItem3.checked){return false}return setGridRowColor(a)},GetHisGridRowClass:function(a){if(!LoadHisGridRowMenuItem1.checked){return false}return setGridRowColor(a)},ShowGridRowMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);LoadGridRowMenu.dataRecord=a.store.getAt(c);LoadGridRowMenu.showAt(b.getXY())},ShowHisGridRowMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);LoadHisGridRowMenu.dataRecord=a.store.getAt(c);LoadHisGridRowMenu.showAt(b.getXY())},LoadPageLoadAlarms:function(){if(LoadGridToolbars.loaded1&&LoadGridToolbars.loaded2&&LoadGridToolbars.loaded3){LoadGridPagingToolbar.doRefresh()}}};var FreMgr={GetGridRowClass:function(a){if(!FreGridRowMenuItem3.checked){return false}return setGridRowColor(a)},GetHisGridRowClass:function(a){if(!FreHisGridRowMenuItem1.checked){return false}return setGridRowColor(a)},ShowGridRowMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);FreGridRowMenu.dataRecord=a.store.getAt(c);FreGridRowMenu.showAt(b.getXY())},ShowHisGridRowMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);FreHisGridRowMenu.dataRecord=a.store.getAt(c);FreHisGridRowMenu.showAt(b.getXY())},LoadPageFreAlarms:function(){if(FreGridToolbars.loaded1&&FreGridToolbars.loaded2&&FreGridToolbars.loaded3){FreGridPagingToolbar.doRefresh()}}};var BatCR={onGridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(a){X.BatCountReport.ShowGridCellDetail("",a.data.LscID,a.data.DevID,a.data.DevIndex)}}}};var BatWnd={showGridRowContextMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);BatWndGridRowMenu.dataRecord=a.store.getAt(c);BatWndGridRowMenu.showAt(b.getXY())}};var DivWnd={showGridRowContextMenu:function(a,c,b){b.preventDefault();a.getSelectionModel().selectRow(c);WndGridRowMenu.dataRecord=a.store.getAt(c);WndGridRowMenu.showAt(b.getXY())}};var KPIReport104={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report104.ShowGridCellDetail(LanguageSet.AlarmWndName,a.data.LscID,a.data.Area3ID,a.data.BuildingID)}}}};var KPIReport105={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report105.ShowGridCellDetail(LanguageSet.AlarmWndName,a.data.LscID,a.data.Area3ID,a.data.BuildingID)}}}};var KPIReport106={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report106.ShowGridCellDetail(LanguageSet.AlarmWndName,a.data.LscID,a.data.Area3ID,a.data.BuildingID)}}}};var KPIReport107={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report107.ShowGridCellDetail(LanguageSet.AlarmWndName,a.data.LscID,a.data.Area3ID,a.data.BuildingID)}}}};var KPIReport108={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report108.ShowGridCellDetail(LanguageSet.AlarmWndName,a.data.LscID,a.data.Area3ID,a.data.BuildingID)}}}};var KPIReport109={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){g=a.data.ID-1;X.report109.ShowGridCellDetail(LanguageSet.StaWndName,a.data.LscID,c.dataIndex)}}}};var KPIReport110={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){g=a.data.ID-1;X.report110.ShowGridCellDetail(LanguageSet.StaWndName,g,c.dataIndex)}}}};var KPIReport111={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report111.ShowGridCellDetail(LanguageSet.AlarmWndName,a.data.LscID)}}}};var KPIReport112={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){g=a.data.ID-1;X.report112.ShowGridCellDetail(LanguageSet.StaWndName,a.data.LscID,c.dataIndex)}}}};var KPIReport113={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){g=a.data.ID-1;X.report113.ShowGridCellDetail(LanguageSet.DevWndName,a.data.LscID,c.dataIndex)}}}};var KPIReport114={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){g=a.data.ID-1;X.report114.ShowGridCellDetail(LanguageSet.DevWndName,a.data.LscID,c.dataIndex)}}}};var KPIReport115={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){g=a.data.ID-1;X.report115.ShowGridCellDetail(LanguageSet.StaWndName,a.data.LscID,c.dataIndex)}}}};var KPIReport116={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report116.ShowGridCellDetail(LanguageSet.AlarmWndName,a.data.LscID)}}}};var KPIReport117={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){g=a.data.ID-1;X.report117.ShowGridCellDetail(LanguageSet.StaWndName,a.data.LscID,c.dataIndex)}}}};var KPIReport120={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report120.ShowGridCellDetail("",a.data.LscID,c.dataIndex)}}}};var KPIReport121={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report121.ShowGridCellDetail("",a.data.LscID,a.data.Date,c.dataIndex)}}}};var KPIReport122={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.report122.ShowGridCellDetail("",a.data.LscID,a.data.Date,c.dataIndex)}}}};var ProjectMgr={GridCmdClick:function(c,a,d,b){this.ShowCmdWindow(c,a.data.LscID,a.data.ProjectId)},GridAddClick:function(){this.ShowCmdWindow("Add",0,0)},ShowCmdWindow:function(c,b,a){X.ProjectManager.ShowCmdWindow(c,b,a,{success:function(d){ProjectFormPanel.clearInvalid()}})},Save:function(a,b){if(!ProjectFormPanel.getForm().isValid()){return false}TipsStatusBar.setStatus({text:LanguageSet.Saving,iconCls:"icon-loading"});X.ProjectManager.Save({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d){if(d.Status==200){TipsStatusBar.setStatus({text:d.Msg,iconCls:"icon-tick"});MainGridPagingToolbar.doLoad()}else{TipsStatusBar.setStatus({text:d.Msg,iconCls:"icon-exclamation"})}}}}})}};var ImportantAlm={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.ImportantAlmReport.InitCountItemTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(ImportantAlm.getValues(this),ImportantAlm.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.AlarmWndName;X.ImportantAlmReport.ShowGridCellDetail(g,h,b.dataIndex)}}};var HisAlmFre={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.HisAlmFreReport.InitCountItemTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(HisAlmFre.getValues(this),HisAlmFre.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.AlarmWndName;X.HisAlmFreReport.ShowGridCellDetail(g,h,b.dataIndex)}}};var AlarmMinInterval={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.HisAlarmMinIntervalReport.InitCountItemTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(AlarmMinInterval.getValues(this),AlarmMinInterval.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.AlarmWndName;if(b.titleStyle==="2"){g=String.format("{0} {1}",a.data.Data1,g)}else{if(b.titleStyle==="3"){g=String.format("{0} {1} {2}",a.data.Data1,a.data.Data2,g)}else{if(b.titleStyle==="4"){g=String.format("{0} {1} {2} {3}",a.data.Data1,a.data.Data2,a.data.Data3,g)}else{if(b.titleStyle==="5"){g=String.format("{0} {1} {2} {3} {4}",a.data.Data1,a.data.Data2,a.data.Data3,a.data.Data4,g)}}}}X.HisAlarmMinIntervalReport.ShowGridCellDetail(g,h,b.dataIndex)}}};var AlarmMaxInterval={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.HisAlarmMaxIntervalReport.InitCountItemTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(AlarmMaxInterval.getValues(this),AlarmMaxInterval.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.AlarmWndName;if(b.titleStyle==="2"){g=String.format("{0} {1}",a.data.Data1,g)}else{if(b.titleStyle==="3"){g=String.format("{0} {1} {2}",a.data.Data1,a.data.Data2,g)}else{if(b.titleStyle==="4"){g=String.format("{0} {1} {2} {3}",a.data.Data1,a.data.Data2,a.data.Data3,g)}else{if(b.titleStyle==="5"){g=String.format("{0} {1} {2} {3} {4}",a.data.Data1,a.data.Data2,a.data.Data3,a.data.Data4,g)}}}}X.HisAlarmMaxIntervalReport.ShowGridCellDetail(g,h,b.dataIndex)}}};var MajorIncident={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.MajorIncidentReport.InitCountItemTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(MajorIncident.getValues(this),MajorIncident.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.AlarmWndName;X.MajorIncidentReport.ShowGridCellDetail(g,h,b.dataIndex)}},initAlarmNameTreePanel:function(){var a=AlarmNameDropDownField.component;if(a.rendered){X.MajorIncidentReport.InitAlarmNameTreePanel({success:function(b){if(!Ext.isEmpty(b,false)){var c=Ext.util.JSON.decode(b,true);if(c&&c.length!=0){a.initChildren(c)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}}};var DevAlm={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.DevAlmReport.InitCountItemTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(DevAlm.getValues(this),DevAlm.getTexts(this),false)},onGridCellDblClick:function(d,g,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(g);if(a){g=a.data.Data0-1;if(b.dblClickEnabled==="1"){X.DevAlmReport.ShowAlarmDetail(LanguageSet.AlarmWndName,g,b.dataIndex)}else{if(b.dblClickEnabled==="2"){X.DevAlmReport.ShowDevDetail(LanguageSet.DevWndName,g,b.dataIndex)}}}},initAlarmNameTreePanel:function(){var a=AlarmNameDropDownField.component;if(a.rendered){X.DevAlmReport.InitAlarmNameTreePanel({success:function(b){if(!Ext.isEmpty(b,false)){var c=Ext.util.JSON.decode(b,true);if(c&&c.length!=0){a.initChildren(c)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}}};var AlmStandard={getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},syncValue:function(b){var a=this.component;if(a.rendered){X.AlmStandardizationReport.InitCountItemTreeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},checkChanged:function(a,b){if(this.checkChangeLock){return false}this.checkChangeLock=true;a.select();if(a.hasChildNodes()){a.expand(false);a.eachChild(function(d){d.cascade(function(c){if(c.ui.rendered){c.ui.toggleCheck(b)}else{c.attributes.checked=b}})})}this.checkChangeLock=false;this.dropDownField.setValue(AlmStandard.getValues(this),AlmStandard.getTexts(this),false)},onGridCellDblClick:function(d,h,c,f){var b=d.getColumnModel().config[c];if(b.dblClickEnabled==="0"){return false}var a=d.store.getAt(h);if(a){h=a.data.Data0-1;var g=LanguageSet.AlarmWndName;X.AlmStandardizationReport.ShowGridCellDetail(g,h,b.dataIndex)}}};var OilEngineReport={GridCellDblClick:function(b,g,d,f){var c=b.getColumnModel().config[d];if(c.dblClickEnabled&&c.wndType&&c.dblClickEnabled==="1"){var a=b.store.getAt(g);if(!Ext.isEmpty(a)){X.OilEngineReport.ShowGridCellDetail(LanguageSet.DivWndName,a.data.LscID,a.data.StaID,c.wndType)}}}};var Energy001={chartPie:null,chartBar:null,PieOption:{tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:"left",top:"center",data:["\u80fd\u8017"]},series:[{name:"\u7535\u91cf\u5206\u7c7b\u5360\u6bd4",type:"pie",radius:["50%","80%"],avoidLabelOverlap:false,label:{normal:{show:false,position:"center"},emphasis:{show:true,textStyle:{fontSize:"15",fontWeight:"bold"}}},labelLine:{normal:{show:false}},data:[{name:"\u80fd\u8017",value:0}]}]},BarOption:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:20,left:0,right:5,bottom:5,containLabel:true},xAxis:[{type:"category",data:["\u80fd\u8017"],splitLine:{show:false}}],yAxis:[{type:"value"}],series:[{name:"\u80fd\u8017",type:"bar",stack:"one",data:[0]}]},syncValue:function(b){var a=this.component;if(a.rendered){X.energy001.InitRangeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},itemClick:function(a,b){this.dropDownField.setValue(a.id,a.text,false);this.dropDownField.collapse()},cellDblClick:function(b,h,g,f){var c=b.getColumnModel().config[g];if(c.dblClickEnabled!="1"){return false}var d=b.store.getAt(h);if(d){var j=d.data.Key;var i=d.data.Current;var a=c.dataIndex;X.energy001.ShowCellDetail(j,a,i)}},initChart:function(){this.chartPie=echarts.init(document.getElementById("PieChart"),"shine");this.chartPie.setOption(this.PieOption);this.chartBar=echarts.init(document.getElementById("BarChart"),"shine");this.chartBar.setOption(this.BarOption)},refreshChart:function(){X.energy001.GetCharts({success:function(a){if(!Ext.isEmpty(a,false)){var e=Ext.util.JSON.decode(a,true);if(e){var c=[];var b=[];e.Pie.forEach(function(g){c.push(g.name);b.push(g)});Energy001.PieOption.legend.data=c;Energy001.PieOption.series[0].data=b;Energy001.chartPie.setOption(Energy001.PieOption,true);var f=[];var d=[];e.Bar.forEach(function(h){f.push(h.name);for(var g=0;g<h.values.length;g++){var j=h.values[g];if(d.length>g){d[g].data.push(j.value)}else{d.push({name:j.name,type:"bar",stack:"one",data:[j.value]})}}});Energy001.BarOption.xAxis[0].data=f;Energy001.BarOption.series=d;Energy001.chartBar.setOption(Energy001.BarOption,true)}}},failure:function(a){Ext.Msg.alert(LanguageSet.SystemError,msg)}})}};var Energy002={chartLine:null,LineOption:{tooltip:{trigger:"axis"},legend:{data:[]},grid:{top:30,left:5,right:10,bottom:5,containLabel:true},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",axisLabel:{formatter:"{value} kWh"}}],series:[]},syncValue:function(b){var a=this.component;if(a.rendered){X.energy002.InitRangeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},itemClick:function(a,b){this.dropDownField.setValue(a.id,a.text,false);this.dropDownField.collapse()},cellDblClick:function(b,d,a,c){},initChart:function(){this.chartLine=echarts.init(document.getElementById("LineChart"),"shine");this.chartLine.setOption(this.LineOption)},refreshChart:function(){X.energy002.GetCharts({success:function(a){if(!Ext.isEmpty(a,false)){var c=Ext.util.JSON.decode(a,true);if(c){var b=[];c.Series.forEach(function(d){b.push(d.name)});Energy002.LineOption.legend.data=b;Energy002.LineOption.series=c.Series;Energy002.LineOption.xAxis[0].data=c.xAxis;Energy002.chartLine.setOption(Energy002.LineOption,true)}}},failure:function(a){Ext.Msg.alert(LanguageSet.SystemError,msg)}})}};var Energy003={chartBar:null,BarOption:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["\u5f53\u524d\u65f6\u6bb5","\u53bb\u5e74\u540c\u671f"]},grid:{top:30,left:5,right:5,bottom:5,containLabel:true},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",axisLabel:{formatter:"{value} kWh"}}],series:[{name:"\u5f53\u524d\u65f6\u6bb5",type:"bar",data:[]},{name:"\u53bb\u5e74\u540c\u671f",type:"bar",data:[]}]},syncValue:function(b){var a=this.component;if(a.rendered){X.energy003.InitRangeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},itemClick:function(a,b){this.dropDownField.setValue(a.id,a.text,false);this.dropDownField.collapse()},cellDblClick:function(b,d,a,c){},initChart:function(){this.chartBar=echarts.init(document.getElementById("BarChart"),"shine");this.chartBar.setOption(this.BarOption)},refreshChart:function(){X.energy003.GetCharts({success:function(a){if(!Ext.isEmpty(a,false)){var c=Ext.util.JSON.decode(a,true);if(c){var e=[],d=[],b=[];c.Data.forEach(function(f){e.push(f.name);d.push(f.value);b.push(f.tvalue)});Energy003.BarOption.xAxis[0].data=e;Energy003.BarOption.series[0].data=d;Energy003.BarOption.series[1].data=b;Energy003.chartBar.setOption(Energy003.BarOption,true)}}},failure:function(a){Ext.Msg.alert(LanguageSet.SystemError,msg)}})}};var Energy004={chartBar:null,BarOption:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["\u5f53\u524d\u65f6\u6bb5","\u524d\u4e00\u65f6\u6bb5"]},grid:{top:30,left:5,right:5,bottom:5,containLabel:true},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value",axisLabel:{formatter:"{value} kWh"}}],series:[{name:"\u5f53\u524d\u65f6\u6bb5",type:"bar",data:[]},{name:"\u524d\u4e00\u65f6\u6bb5",type:"bar",data:[]}]},syncValue:function(b){var a=this.component;if(a.rendered){X.energy004.InitRangeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},itemClick:function(a,b){this.dropDownField.setValue(a.id,a.text,false);this.dropDownField.collapse()},cellDblClick:function(b,d,a,c){},initChart:function(){this.chartBar=echarts.init(document.getElementById("BarChart"),"shine");this.chartBar.setOption(this.BarOption)},refreshChart:function(){X.energy004.GetCharts({success:function(a){if(!Ext.isEmpty(a,false)){var c=Ext.util.JSON.decode(a,true);if(c){var e=[],d=[],b=[];c.Data.forEach(function(f){e.push(f.name);d.push(f.value);b.push(f.hvalue)});Energy004.BarOption.xAxis[0].data=e;Energy004.BarOption.series[0].data=d;Energy004.BarOption.series[1].data=b;Energy004.chartBar.setOption(Energy004.BarOption,true)}}},failure:function(a){Ext.Msg.alert(LanguageSet.SystemError,msg)}})}};var Energy005={chartBar:null,BarOption:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[]},grid:{top:30,left:5,right:5,bottom:5,containLabel:true},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[]},syncValue:function(b){var a=this.component;if(a.rendered){X.energy005.InitRangeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},getValues:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.id)});return c.join(";")},getTexts:function(a){var c=[],b=a.getChecked();Ext.each(b,function(d){c.push(d.text)});return c.join(";")},checkChanged:function(c,b){var a=this.getChecked();if(a.length>2){if(this.checkChangeLock){return false}this.checkChangeLock=true;c.ui.toggleCheck(false);this.checkChangeLock=false;return false}this.dropDownField.setValue(Energy005.getValues(this),Energy005.getTexts(this),false)},cellDblClick:function(b,d,a,c){},initChart:function(){this.chartBar=echarts.init(document.getElementById("BarChart"),"shine");this.chartBar.setOption(this.BarOption)},refreshChart:function(){X.energy005.GetCharts({success:function(a){if(!Ext.isEmpty(a,false)){var c=Ext.util.JSON.decode(a,true);if(c){var b=[];c.Series.forEach(function(d){b.push(d.name)});Energy005.BarOption.legend.data=b;Energy005.BarOption.xAxis[0].data=c.xAxis;Energy005.BarOption.series=c.Series;Energy005.chartBar.setOption(Energy005.BarOption,true)}}},failure:function(a){Ext.Msg.alert(LanguageSet.SystemError,msg)}})}};var Energy006={chartLine:null,LineOption:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["PUE"]},grid:{top:30,left:5,right:10,bottom:5,containLabel:true},xAxis:[{type:"category",data:[]}],yAxis:[{type:"value"}],series:[{name:"PUE",type:"bar",data:[]}]},syncValue:function(b){var a=this.component;if(a.rendered){X.energy006.InitRangeNodes({success:function(c){if(!Ext.isEmpty(c,false)){var d=Ext.util.JSON.decode(c,true);if(d&&d.length>0){a.initChildren(d)}else{a.getRootNode().removeChildren()}}},eventMask:{showMask:true,target:"customtarget",customTarget:a}})}},itemClick:function(a,b){this.dropDownField.setValue(a.id,a.text,false);this.dropDownField.collapse()},cellDblClick:function(b,d,a,c){},initChart:function(){this.chartLine=echarts.init(document.getElementById("LineChart"),"shine");this.chartLine.setOption(this.LineOption)},refreshChart:function(){X.energy006.GetCharts({success:function(a){if(!Ext.isEmpty(a,false)){var c=Ext.util.JSON.decode(a,true);if(c){var d=[],b=[];c.Data.forEach(function(e){d.push(e.name);b.push(e.value)});Energy006.LineOption.xAxis[0].data=d;Energy006.LineOption.series[0].data=b;Energy006.chartLine.setOption(Energy006.LineOption,true)}}},failure:function(a){Ext.Msg.alert(LanguageSet.SystemError,msg)}})}};
