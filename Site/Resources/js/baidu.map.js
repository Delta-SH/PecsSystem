var BMapLib=window.BMapLib=BMapLib||{};var BMAPLIB_TAB_SEARCH=0,BMAPLIB_TAB_TO_HERE=1,BMAPLIB_TAB_FROM_HERE=2;(function(){var d,c=d=c||{version:"1.5.0"};c.guid="$BAIDU$";(function(){window[c.guid]=window[c.guid]||{};c.lang=c.lang||{};c.lang.isString=function(e){return"[object String]"==Object.prototype.toString.call(e)};c.lang.Event=function(e,f){this.type=e;this.returnValue=true;this.target=f||null;this.currentTarget=null};c.object=c.object||{};c.extend=c.object.extend=function(g,e){for(var f in e){if(e.hasOwnProperty(f)){g[f]=e[f]}}return g};c.event=c.event||{};c.event._listeners=c.event._listeners||[];c.dom=c.dom||{};c.dom._g=function(e){if(c.lang.isString(e)){return document.getElementById(e)}return e};c._g=c.dom._g;c.event.on=function(f,i,k){i=i.replace(/^on/i,"");f=c.dom._g(f);var j=function(m){k.call(f,m)},e=c.event._listeners,h=c.event._eventFilter,l,g=i;i=i.toLowerCase();if(h&&h[i]){l=h[i](f,i,j);g=l.type;j=l.listener}if(f.addEventListener){f.addEventListener(g,j,false)}else{if(f.attachEvent){f.attachEvent("on"+g,j)}}e[e.length]=[f,i,k,j,g];return f};c.on=c.event.on;c.event.un=function(g,j,f){g=c.dom._g(g);j=j.replace(/^on/i,"").toLowerCase();var m=c.event._listeners,h=m.length,i=!f,l,k,e;while(h--){l=m[h];if(l[1]===j&&l[0]===g&&(i||l[2]===f)){k=l[4];e=l[3];if(g.removeEventListener){g.removeEventListener(k,e,false)}else{if(g.detachEvent){g.detachEvent("on"+k,e)}}m.splice(h,1)}}return g};c.un=c.event.un;c.dom.g=function(e){if("string"==typeof e||e instanceof String){return document.getElementById(e)}else{if(e&&e.nodeName&&(e.nodeType==1||e.nodeType==9)){return e}}return null};c.g=c.G=c.dom.g;c.string=c.string||{};c.browser=c.browser||{};c.browser.ie=c.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?(document.documentMode||+RegExp["\x241"]):undefined;c.dom._NAME_ATTRS=(function(){var e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};if(c.browser.ie<8){e["for"]="htmlFor";e["class"]="className"}else{e.htmlFor="for";e.className="class"}return e})();c.dom.setAttr=function(f,e,g){f=c.dom.g(f);if("style"==e){f.style.cssText=g}else{e=c.dom._NAME_ATTRS[e]||e;f.setAttribute(e,g)}return f};c.setAttr=c.dom.setAttr;c.dom.setAttrs=function(g,e){g=c.dom.g(g);for(var f in e){c.dom.setAttr(g,f,e[f])}return g};c.setAttrs=c.dom.setAttrs;c.dom.create=function(g,e){var h=document.createElement(g),f=e||{};return c.dom.setAttrs(h,f)};d.undope=true})();var a=BMapLib.SearchInfoWindow=function(g,f,e){this.guid=b++;BMapLib.SearchInfoWindow.instance[this.guid]=this;this._isOpen=false;this._map=g;this._opts=e=e||{};this._content=f||"";this._opts.width=e.width;this._opts.height=e.height;this._opts._title=e.title||"";this._opts.offset=e.offset||new BMap.Size(0,0);this._opts.enableAutoPan=e.enableAutoPan===false?false:true;this._opts._panel=e.panel||null;this._opts._searchTypes=e.searchTypes};a.prototype=new BMap.Overlay();a.prototype.initialize=function(f){this._closeOtherSearchInfo();var e=this;var h=this._createSearchTemplate();var g=f.getPanes().floatPane;g.style.width="auto";g.appendChild(h);this._initSearchTemplate();this._getSearchInfoWindowSize();this._boxWidth=parseInt(this.container.offsetWidth,10);this._boxHeight=parseInt(this.container.offsetHeight,10);c.event.on(h,"onmousedown",function(i){e._stopBubble(i)});c.event.on(h,"onmouseover",function(i){e._stopBubble(i)});c.event.on(h,"contextmenu",function(i){e._stopBubble(i)});c.event.on(h,"click",function(i){e._stopBubble(i)});c.event.on(h,"dblclick",function(i){e._stopBubble(i)});return h};a.prototype.draw=function(){this._isOpen&&this._adjustPosition(this._point)};a.prototype.open=function(e){this._map.closeInfoWindow();var f=this,g;if(!this._isOpen){this._map.addOverlay(this);this._isOpen=true;setTimeout(function(){f._dispatchEvent(f,"open",{point:f._point})},10)}if(e instanceof BMap.Point){g=e;this._removeMarkerEvt();this._marker=null}else{if(e instanceof BMap.Marker){if(this._marker){this._removeMarkerEvt()}g=e.getPosition();this._marker=e;!this._markerDragend&&this._marker.addEventListener("dragend",this._markerDragend=function(h){f._point=h.point;f._adjustPosition(f._point);f._panBox();f.show()});!this._markerDragging&&this._marker.addEventListener("dragging",this._markerDragging=function(){f.hide();f._point=f._marker.getPosition();f._adjustPosition(f._point)})}}this.show();this._point=g;this._panBox();this._adjustPosition(this._point)};a.prototype.close=function(){if(this._isOpen){this._map.removeOverlay(this);this._disposeAutoComplete();this._isOpen=false;this._dispatchEvent(this,"close",{point:this._point})}};a.prototype.enableAutoPan=function(){this._opts.enableAutoPan=true};a.prototype.disableAutoPan=function(){this._opts.enableAutoPan=false};a.prototype.setContent=function(e){this._setContent(e);this._getSearchInfoWindowSize();this._adjustPosition(this._point)},a.prototype.setTitle=function(e){this.dom.title.innerHTML=e;this._opts._title=e};a.prototype.getContent=function(){return this.dom.content.innerHTML},a.prototype.getTitle=function(){return this.dom.title.innerHTML};a.prototype.setPosition=function(e){this._point=e;this._adjustPosition(e);this._panBox();this._removeMarkerEvt()};a.prototype.getPosition=function(){return this._point};a.prototype.getOffset=function(){return this._opts.offset},c.object.extend(a.prototype,{_closeOtherSearchInfo:function(){var f=BMapLib.SearchInfoWindow.instance,e=f.length;while(e--){if(f[e]._isOpen){f[e].close()}}},_setContent:function(f){if(!this.dom||!this.dom.content){return}if(typeof f.nodeType==="undefined"){this.dom.content.innerHTML=f}else{this.dom.content.appendChild(f)}var e=this;e._adjustContainerWidth();this._content=f},_adjustPosition:function(g){var e=this._getPointPosition(g);var f=this._marker&&this._marker.getIcon();if(this._marker){this.container.style.bottom=-(e.y-this._opts.offset.height-f.anchor.height+f.infoWindowAnchor.height)-this._marker.getOffset().height+2+30+"px";this.container.style.left=e.x-f.anchor.width+this._marker.getOffset().width+f.infoWindowAnchor.width-this._boxWidth/2+28+"px"}else{this.container.style.bottom=-(e.y-this._opts.offset.height)+30+"px";this.container.style.left=e.x-this._boxWidth/2+25+"px"}},_getPointPosition:function(e){this._pointPosition=this._map.pointToOverlayPixel(e);return this._pointPosition},_getSearchInfoWindowSize:function(){this._boxWidth=parseInt(this.container.offsetWidth,10);this._boxHeight=parseInt(this.container.offsetHeight,10)},_stopBubble:function(f){if(f&&f.stopPropagation){f.stopPropagation()}else{window.event.cancelBubble=true}},_panBox:function(){if(!this._opts.enableAutoPan){return}var j=parseInt(this._map.getContainer().offsetHeight,10),o=parseInt(this._map.getContainer().offsetWidth,10),k=this._boxHeight,e=this._boxWidth;if(k>=j||e>=o){return}if(!this._map.getBounds().containsPoint(this._point)){this._map.setCenter(this._point)}var f=this._map.pointToPixel(this._point),p,m,i=e/2-28-f.x+10,n=e/2+28+f.x-o+10;if(this._marker){var l=this._marker.getIcon()}var g=this._marker?l.anchor.height+this._marker.getOffset().height-l.infoWindowAnchor.height:0;p=k-f.y+this._opts.offset.height+g+31+10;panX=i>0?i:(n>0?-n:0);m=p>0?p:0;this._map.panBy(panX,m)},_removeMarkerEvt:function(){this._markerDragend&&this._marker.removeEventListener("dragend",this._markerDragend);this._markerDragging&&this._marker.removeEventListener("dragging",this._markerDragging);this._markerDragend=this._markerDragging=null},_dispatchEvent:function(e,f,h){f.indexOf("on")!=0&&(f="on"+f);var g=new c.lang.Event(f);if(!!h){for(var i in h){g[i]=h[i]}}e.dispatchEvent(g)},_initSearchTemplate:function(){this._initDom();this._initPanelTemplate();this.setTitle(this._opts._title);if(this._opts.height){this.dom.content.style.height=parseInt(this._opts.height,10)+"px"}this._setContent(this._content);this._initService();this._bind();if(this._opts._searchTypes){this._setSearchTypes()}this._mendIE6()},_createSearchTemplate:function(){if(!this._div){var f=c.dom.create("div",{"class":"BMapLib_SearchInfoWindow",id:"BMapLib_SearchInfoWindow"+this.guid});var e=['<div class="BMapLib_bubble_top">','<div class="BMapLib_bubble_title" id="BMapLib_bubble_title'+this.guid+'"></div>','<div class="BMapLib_bubble_close" id="BMapLib_bubble_close'+this.guid+'">',"<span>\u5173\u95ed</span>","</div>","</div>",'<div class="BMapLib_bubble_center">','<div class="BMapLib_bubble_content" id="BMapLib_bubble_content'+this.guid+'">',"</div>",'<div class="BMapLib_nav" id="BMapLib_nav'+this.guid+'">','<ul class="BMapLib_nav_tab" id="BMapLib_nav_tab'+this.guid+'">','<li class="BMapLib_first BMapLib_current" id="BMapLib_tab_search'+this.guid+'" style="display:block;">','<span class="BMapLib_icon BMapLib_icon_nbs"></span>\u5728\u9644\u8fd1\u627e',"</li>",'<li class="" id="BMapLib_tab_tohere'+this.guid+'" style="display:block;">','<span class="BMapLib_icon BMapLib_icon_tohere"></span>\u5230\u8fd9\u91cc\u53bb',"</li>",'<li class="" id="BMapLib_tab_fromhere'+this.guid+'" style="display:block;">','<span class="BMapLib_icon BMapLib_icon_fromhere"></span>\u4ece\u8fd9\u91cc\u51fa\u53d1',"</li>","</ul>",'<ul class="BMapLib_nav_tab_content">','<li id="BMapLib_searchBox'+this.guid+'">','<table width="100%" align="center" border=0 cellpadding=0 cellspacing=0>','<tr><td style="padding-left:8px;"><input id="BMapLib_search_text'+this.guid+'" class="BMapLib_search_text" type="text" maxlength="100" autocomplete="off"></td><td width="55" style="padding-left:7px;"><input id="BMapLib_search_nb_btn'+this.guid+'" type="submit" value="\u641c\u7d22" class="iw_bt"></td></tr>',"</table>","</li>",'<li id="BMapLib_transBox'+this.guid+'" style="display:none">','<table width="100%" align="center" border=0 cellpadding=0 cellspacing=0>','<tr><td width="30" style="padding-left:8px;"><div id="BMapLib_stationText'+this.guid+'">\u8d77\u70b9</div></td><td><input id="BMapLib_trans_text'+this.guid+'" class="BMapLib_trans_text" type="text" maxlength="100" autocomplete="off"></td><td width="106" style="padding-left:7px;"><input id="BMapLib_search_bus_btn'+this.guid+'" type="button" value="\u516c\u4ea4" class="iw_bt" style="margin-right:5px;"><input id="BMapLib_search_drive_btn'+this.guid+'" type="button" class="iw_bt" value="\u9a7e\u8f66"></td></tr>',"</table>","</li>","</ul>","</div>","</div>",'<div class="BMapLib_bubble_bottom"></div>','<img src="Resources/images/Baidu/SearchInfoWindow/iw_tail.png" width="58" height="31" alt="" class="BMapLib_trans" id="BMapLib_trans'+this.guid+'" style="left:144px;"/>'];f.innerHTML=e.join("");this._div=f}return this._div},_initPanelTemplate:function(){var f=c.g(this._opts._panel);if(!this.dom.panel&&f){f.innerHTML="";this.dom.panel=f;var e=c.dom.create("div");e.style.cssText="display:none;background:#FD9;height:30px;line-height:30px;text-align:center;font-size:12px;color:#994C00;";f.appendChild(e);this.dom.panel.address=e;var g=c.dom.create("div");f.appendChild(g);this.dom.panel.localSearch=g}},_initDom:function(){if(!this.dom){this.dom={container:c.g("BMapLib_SearchInfoWindow"+this.guid),content:c.g("BMapLib_bubble_content"+this.guid),title:c.g("BMapLib_bubble_title"+this.guid),closeBtn:c.g("BMapLib_bubble_close"+this.guid),transIco:c.g("BMapLib_trans"+this.guid),navBox:c.g("BMapLib_nav"+this.guid),navTab:c.g("BMapLib_nav_tab"+this.guid),seartTab:c.g("BMapLib_tab_search"+this.guid),tohereTab:c.g("BMapLib_tab_tohere"+this.guid),fromhereTab:c.g("BMapLib_tab_fromhere"+this.guid),searchBox:c.g("BMapLib_searchBox"+this.guid),transBox:c.g("BMapLib_transBox"+this.guid),stationText:c.g("BMapLib_stationText"+this.guid),nbBtn:c.g("BMapLib_search_nb_btn"+this.guid),busBtn:c.g("BMapLib_search_bus_btn"+this.guid),driveBtn:c.g("BMapLib_search_drive_btn"+this.guid),searchText:c.g("BMapLib_search_text"+this.guid),transText:c.g("BMapLib_trans_text"+this.guid)};this.container=this.dom.container}},_adjustContainerWidth:function(){var f=250,e=0;if(this._opts.width){f=parseInt(this._opts.width,10);f+=10}else{f=parseInt(this.dom.content.offsetWidth,10)}if(f<250){f=250}this._width=f;this.container.style.width=this._width+"px";this._adjustTransPosition()},_adjustTransPosition:function(){this.dom.transIco.style.left=this.container.offsetWidth/2-2-29+"px";this.dom.transIco.style.top=this.container.offsetHeight-2+"px"},_initService:function(){var g=this._map;var f=this;var e={};e.map=g;if(this.dom.panel){e.panel=this.dom.panel.localSearch}if(!this.localSearch){this.localSearch=new BMap.LocalSearch(g,{renderOptions:e,onSearchComplete:function(h){f._clearAddress();f._drawCircleBound()}})}if(!this.transitRoute){this.transitRoute=new BMap.TransitRoute(g,{renderOptions:e,onSearchComplete:function(h){f._transitRouteComplete(f.transitRoute,h)}})}if(!this.drivingRoute){this.drivingRoute=new BMap.DrivingRoute(g,{renderOptions:e,onSearchComplete:function(h){f._transitRouteComplete(f.drivingRoute,h)}})}},_bind:function(){var e=this;c.on(this.dom.closeBtn,"click",function(f){e.close()});c.on(this.dom.seartTab,"click",function(f){e._showTabContent(BMAPLIB_TAB_SEARCH)});c.on(this.dom.tohereTab,"click",function(f){e._showTabContent(BMAPLIB_TAB_TO_HERE)});c.on(this.dom.fromhereTab,"click",function(f){e._showTabContent(BMAPLIB_TAB_FROM_HERE)});c.on(this.dom.nbBtn,"click",function(f){e._localSearchAction()});c.on(this.dom.busBtn,"click",function(f){e._transitRouteAction(e.transitRoute)});c.on(this.dom.driveBtn,"click",function(f){e._transitRouteAction(e.drivingRoute)});this._autoCompleteIni()},_showTabContent:function(h){this._hideAutoComplete();var g=this.dom.navTab.getElementsByTagName("li"),e=g.length;for(var f=0,e=g.length;f<e;f++){g[f].className=""}switch(h){case BMAPLIB_TAB_SEARCH:this.dom.seartTab.className="BMapLib_current";this.dom.searchBox.style.display="block";this.dom.transBox.style.display="none";break;case BMAPLIB_TAB_TO_HERE:this.dom.tohereTab.className="BMapLib_current";this.dom.searchBox.style.display="none";this.dom.transBox.style.display="block";this.dom.stationText.innerHTML="\u8d77\u70b9";this._pointType="endPoint";break;case BMAPLIB_TAB_FROM_HERE:this.dom.fromhereTab.className="BMapLib_current";this.dom.searchBox.style.display="none";this.dom.transBox.style.display="block";this.dom.stationText.innerHTML="\u7ec8\u70b9";this._pointType="startPoint";break}this._firstTab.className+=" BMapLib_first"},_autoCompleteIni:function(){this.searchAC=new BMap.Autocomplete({input:this.dom.searchText,location:this._map});this.transAC=new BMap.Autocomplete({input:this.dom.transText,location:this._map})},_hideAutoComplete:function(){this.searchAC.hide();this.transAC.hide()},_disposeAutoComplete:function(){this.searchAC.dispose();this.transAC.dispose()},_localSearchAction:function(){var f=this._kw=this.dom.searchText.value;if(f==""){this.dom.searchText.focus()}else{this._reset();this.close();var e=this._radius=1000;this.localSearch.searchNearby(f,this._point,e)}},_drawCircleBound:function(){this._closeCircleBound();var f=this._searchCircle=new BMap.Circle(this._point,this._radius,{strokeWeight:3,strokeOpacity:0.4,strokeColor:"#e00",filColor:"#00e",fillOpacity:0.4});var e=this._searchLabel=new BMap.Label('<div onmousedown ="BMapLib.SearchInfoWindow.instance['+this.guid+']._stopBubble()"><input type="text" value="'+this._radius+'" style="width:30px;" id="BMapLib_search_radius'+this.guid+'"/>m <a href="javascript:void(0)" title="\u4fee\u6539" onclick="BMapLib.SearchInfoWindow.instance['+this.guid+']._changeSearchRadius()" style="text-decoration:none;color:blue;">\u4fee\u6539</a><img src="Resources/images/Baidu/SearchInfoWindow/iw_close.gif" alt="\u5173\u95ed" title="\u5173\u95ed" style="cursor:pointer;padding:0 5px;" onclick="BMapLib.SearchInfoWindow.instance['+this.guid+']._closeCircleBound()"/></div>',{position:this._point});this._map.addOverlay(f);this._map.addOverlay(e);this._hasCircle=true},_changeSearchRadius:function(){var e=parseInt(c.g("BMapLib_search_radius"+this.guid).value,10);if(e>0&&e!=this._radius){this._radius=e;this.localSearch.searchNearby(this._kw,this._point,e);this._closeCircleBound()}},_closeCircleBound:function(e){if(this._searchCircle){this._map.removeOverlay(this._searchCircle)}if(this._searchLabel){this._map.removeOverlay(this._searchLabel)}this._hasCircle=false},_transitRouteAction:function(e){var f=this.dom.transText.value;if(f==""){this.dom.transText.focus()}else{this._reset();this.close();var g=this._getTransPoi(f);e.search(g.start,g.end)}},_transitRouteComplete:function(e,h){this._clearAddress();var f=e.getStatus();if(f==BMAP_STATUS_UNKNOWN_ROUTE){var g=h.getStartStatus(),i=h.getEndStatus(),j="";j="\u627e\u4e0d\u5230\u76f8\u5173\u7684\u7ebf\u8def";if(g==BMAP_ROUTE_STATUS_EMPTY&&i==BMAP_ROUTE_STATUS_EMPTY){j="\u627e\u4e0d\u5230\u76f8\u5173\u7684\u8d77\u70b9\u548c\u7ec8\u70b9"}else{if(g==BMAP_ROUTE_STATUS_EMPTY){j="\u627e\u4e0d\u5230\u76f8\u5173\u7684\u8d77\u70b9"}if(i==BMAP_ROUTE_STATUS_EMPTY){j="\u627e\u4e0d\u5230\u76f8\u5173\u7684\u7ec8\u70b9"}}if(this._pointType=="startPoint"&&i==BMAP_ROUTE_STATUS_ADDRESS||this._pointType=="endPoint"&&g==BMAP_ROUTE_STATUS_ADDRESS){this._searchAddress(e)}else{this.dom.panel.address.style.display="block";this.dom.panel.address.innerHTML=j}}},_searchAddress:function(e){var i=this;var f=this.dom.panel;if(!this.lsAddress){var g={map:this._map};if(f){g.panel=this.dom.panel.localSearch}this.lsAddress=new BMap.LocalSearch(map,{renderOptions:g})}var h=i._pointType=="startPoint"?"\u7ec8\u70b9":"\u8d77\u70b9";if(f){this.dom.panel.address.style.display="block";this.dom.panel.address.innerHTML="\u8bf7\u9009\u62e9\u51c6\u786e\u7684"+h}this.lsAddress.setInfoHtmlSetCallback(function(l,k){var j=document.createElement("div");j.style.cssText="position:relative;left:50%;margin:5px 0 0 -30px;width:60px;height:27px;line-height:27px;border:1px solid #E0C3A6;text-align:center;color:#B35900;cursor:pointer;background-color:#FFEECC;border-radius:2px; background-image: -webkit-gradient(linear, left top, left bottom, from(#FFFDF8), to(#FFEECC))";j.innerHTML="\u8bbe\u4e3a"+h;k.appendChild(j);c.on(j,"click",function(){i._clearAddress();var m=l.marker.getPosition();if(h=="\u8d77\u70b9"){e.search(m,i._point)}else{e.search(i._point,m)}})});this._reset();this.lsAddress.search(this.dom.transText.value)},_getTransPoi:function(f){var g,e;if(this._pointType=="startPoint"){g=this._point;e=f}else{g=f;e=this._point}return{start:g,end:e}},_setSearchTypes:function(){var l=this._unique(this._opts._searchTypes),f=this.dom.navTab,k=[this.dom.seartTab,this.dom.tohereTab,this.dom.fromhereTab],j=0,e=0,h=0,m;this.tabLength=l.length;tabWidth=Math.floor((this._width-this.tabLength+1)/this.tabLength);if(l.length==0){this.dom.navBox.style.display="none"}else{for(j=0,e=k.length;j<e;j++){k[j].className="";k[j].style.display="none"}for(j=0;j<this.tabLength;j++){m=k[l[j]];if(j==0){m.className="BMapLib_first BMapLib_current";this._firstTab=m;h=l[j]}if(j==this.tabLength-1){var g=this._width-(this.tabLength-1)*(tabWidth+1);if(c.browser.ie==6){m.style.width=g-3+"px"}else{m.style.width=g+"px"}}else{m.style.width=tabWidth+"px"}m.style.display="block"}if(l[1]!=undefined){f.appendChild(k[l[1]])}if(l[2]!=undefined){f.appendChild(k[l[2]])}this._showTabContent(h)}this._adjustTransPosition()},_unique:function(g){var f=g.length,e=g.slice(0),j,h;while(--f>=0){h=e[f];if(h<0||h>2){e.splice(f,1);continue}j=f;while(j--){if(h==e[j]){e.splice(f,1);break}}}return e},_reset:function(){this.localSearch.clearResults();this.transitRoute.clearResults();this.drivingRoute.clearResults();this._closeCircleBound();this._hideAutoComplete()},_clearAddress:function(){if(this.lsAddress){this.lsAddress.clearResults()}if(this.dom.panel){this.dom.panel.address.style.display="none"}},_mendIE6:function(g){if(!c.browser.ie||c.browser.ie>6){return}var f=this.container.getElementsByTagName("IMG");for(var e=0;e<f.length;e++){if(f[e].src.indexOf(".png")<0){continue}f[e].style.cssText+=";FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+f[e].src+",sizingMethod=crop)";f[e].src="Resources/images/Baidu/SearchInfoWindow/blank.gif"}}});var b=0;BMapLib.SearchInfoWindow.instance=[]})();(function(){var c=function(i,h,j){if(!i||i.length==0){j&&j(null);return false}var e=[];var g=[];var f=20;for(var d=0;d<i.length;d++){if(d>=f){break}e.push(i[d].lng);g.push(i[d].lat)}b(e,g,h,j)};var b=function(d,g,f,i){var h="cbk_"+Math.round(Math.random()*10000);BMap.Convertor[h]=function(j){delete BMap.Convertor[h];i&&i(j)};var e="http://api.map.baidu.com/ag/coord/convert?from="+(f||0)+"&to=4&mode=1&x="+d.join(",")+"&y="+g.join(",")+"&callback=BMap.Convertor."+h;a(e);d=[];g=[]};var a=function(f,g){var e=document.getElementsByTagName("head")[0];var d=document.createElement("script");d.type="text/javascript";d.src=f;d.onload=d.onreadystatechange=function(){if((!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){g&&g();d.onload=d.onreadystatechange=null;if(e&&d.parentNode){e.removeChild(d)}}};e.insertBefore(d,e.firstChild)};window.BMap=window.BMap||{};BMap.Convertor={};BMap.Convertor.translate=c})();Ext.ns("X");var cityCenter={municipalities:[{n:"\u5317\u4eac",g:"116.395645,39.929986|12"},{n:"\u4e0a\u6d77",g:"121.487899,31.249162|12"},{n:"\u5929\u6d25",g:"117.210813,39.14393|12"},{n:"\u91cd\u5e86",g:"106.530635,29.544606|12"}],provinces:[{n:"\u5b89\u5fbd",g:"117.216005,31.859252|8",cities:[{n:"\u5408\u80a5",g:"117.282699,31.866942|12"},{n:"\u5b89\u5e86",g:"117.058739,30.537898|13"},{n:"\u868c\u57e0",g:"117.35708,32.929499|13"},{n:"\u4eb3\u5dde",g:"115.787928,33.871211|13"},{n:"\u5de2\u6e56",g:"117.88049,31.608733|13"},{n:"\u6c60\u5dde",g:"117.494477,30.660019|14"},{n:"\u6ec1\u5dde",g:"118.32457,32.317351|13"},{n:"\u961c\u9633",g:"115.820932,32.901211|13"},{n:"\u6dee\u5317",g:"116.791447,33.960023|13"},{n:"\u6dee\u5357",g:"117.018639,32.642812|13"},{n:"\u9ec4\u5c71",g:"118.29357,29.734435|13"},{n:"\u516d\u5b89",g:"116.505253,31.755558|13"},{n:"\u9a6c\u978d\u5c71",g:"118.515882,31.688528|13"},{n:"\u5bbf\u5dde",g:"116.988692,33.636772|13"},{n:"\u94dc\u9675",g:"117.819429,30.94093|14"},{n:"\u829c\u6e56",g:"118.384108,31.36602|12"},{n:"\u5ba3\u57ce",g:"118.752096,30.951642|13"}]},{n:"\u798f\u5efa",g:"117.984943,26.050118|8",cities:[{n:"\u798f\u5dde",g:"119.330221,26.047125|12"},{n:"\u9f99\u5ca9",g:"117.017997,25.078685|13"},{n:"\u5357\u5e73",g:"118.181883,26.643626|13"},{n:"\u5b81\u5fb7",g:"119.542082,26.656527|14"},{n:"\u8386\u7530",g:"119.077731,25.44845|13"},{n:"\u6cc9\u5dde",g:"118.600362,24.901652|12"},{n:"\u4e09\u660e",g:"117.642194,26.270835|14"},{n:"\u53a6\u95e8",g:"118.103886,24.489231|12"},{n:"\u6f33\u5dde",g:"117.676205,24.517065|12"}]},{n:"\u7518\u8083",g:"102.457625,38.103267|6",cities:[{n:"\u5170\u5dde",g:"103.823305,36.064226|12"},{n:"\u767d\u94f6",g:"104.171241,36.546682|13"},{n:"\u5b9a\u897f",g:"104.626638,35.586056|13"},{n:"\u7518\u5357\u5dde",g:"102.917442,34.992211|14"},{n:"\u5609\u5cea\u5173",g:"98.281635,39.802397|13"},{n:"\u91d1\u660c",g:"102.208126,38.516072|13"},{n:"\u9152\u6cc9",g:"98.508415,39.741474|13"},{n:"\u4e34\u590f\u5dde",g:"103.215249,35.598514|13"},{n:"\u9647\u5357",g:"104.934573,33.39448|14"},{n:"\u5e73\u51c9",g:"106.688911,35.55011|13"},{n:"\u5e86\u9633",g:"107.644227,35.726801|13"},{n:"\u5929\u6c34",g:"105.736932,34.584319|13"},{n:"\u6b66\u5a01",g:"102.640147,37.933172|13"},{n:"\u5f20\u6396",g:"100.459892,38.93932|13"}]},{n:"\u5e7f\u4e1c",g:"113.394818,23.408004|8",cities:[{n:"\u5e7f\u5dde",g:"113.30765,23.120049|12"},{n:"\u6f6e\u5dde",g:"116.630076,23.661812|13"},{n:"\u4e1c\u839e",g:"113.763434,23.043024|12"},{n:"\u4f5b\u5c71",g:"113.134026,23.035095|13"},{n:"\u6cb3\u6e90",g:"114.713721,23.757251|12"},{n:"\u60e0\u5dde",g:"114.410658,23.11354|12"},{n:"\u6c5f\u95e8",g:"113.078125,22.575117|13"},{n:"\u63ed\u9633",g:"116.379501,23.547999|13"},{n:"\u8302\u540d",g:"110.931245,21.668226|13"},{n:"\u6885\u5dde",g:"116.126403,24.304571|13"},{n:"\u6e05\u8fdc",g:"113.040773,23.698469|13"},{n:"\u6c55\u5934",g:"116.72865,23.383908|13"},{n:"\u6c55\u5c3e",g:"115.372924,22.778731|14"},{n:"\u97f6\u5173",g:"113.594461,24.80296|13"},{n:"\u6df1\u5733",g:"114.025974,22.546054|12"},{n:"\u9633\u6c5f",g:"111.97701,21.871517|14"},{n:"\u4e91\u6d6e",g:"112.050946,22.937976|13"},{n:"\u6e5b\u6c5f",g:"110.365067,21.257463|13"},{n:"\u8087\u5e86",g:"112.479653,23.078663|13"},{n:"\u4e2d\u5c71",g:"113.42206,22.545178|12"},{n:"\u73e0\u6d77",g:"113.562447,22.256915|13"}]},{n:"\u5e7f\u897f",g:"108.924274,23.552255|7",cities:[{n:"\u5357\u5b81",g:"108.297234,22.806493|12"},{n:"\u767e\u8272",g:"106.631821,23.901512|13"},{n:"\u5317\u6d77",g:"109.122628,21.472718|13"},{n:"\u5d07\u5de6",g:"107.357322,22.415455|14"},{n:"\u9632\u57ce\u6e2f",g:"108.351791,21.617398|15"},{n:"\u6842\u6797",g:"110.26092,25.262901|12"},{n:"\u8d35\u6e2f",g:"109.613708,23.103373|13"},{n:"\u6cb3\u6c60",g:"108.069948,24.699521|14"},{n:"\u8d3a\u5dde",g:"111.552594,24.411054|14"},{n:"\u6765\u5bbe",g:"109.231817,23.741166|14"},{n:"\u67f3\u5dde",g:"109.422402,24.329053|12"},{n:"\u94a6\u5dde",g:"108.638798,21.97335|13"},{n:"\u68a7\u5dde",g:"111.305472,23.485395|13"},{n:"\u7389\u6797",g:"110.151676,22.643974|14"}]},{n:"\u8d35\u5dde",g:"106.734996,26.902826|8",cities:[{n:"\u8d35\u9633",g:"106.709177,26.629907|12"},{n:"\u5b89\u987a",g:"105.92827,26.228595|13"},{n:"\u6bd5\u8282\u5730\u533a",g:"105.300492,27.302612|14"},{n:"\u516d\u76d8\u6c34",g:"104.852087,26.591866|13"},{n:"\u94dc\u4ec1\u5730\u533a",g:"109.196161,27.726271|14"},{n:"\u9075\u4e49",g:"106.93126,27.699961|13"},{n:"\u9ed4\u897f\u5357\u5dde",g:"104.900558,25.095148|11"},{n:"\u9ed4\u4e1c\u5357\u5dde",g:"107.985353,26.583992|11"},{n:"\u9ed4\u5357\u5dde",g:"107.523205,26.264536|11"}]},{n:"\u6d77\u5357",g:"109.733755,19.180501|9",cities:[{n:"\u6d77\u53e3",g:"110.330802,20.022071|13"},{n:"\u767d\u6c99",g:"109.358586,19.216056|12"},{n:"\u4fdd\u4ead",g:"109.656113,18.597592|12"},{n:"\u660c\u6c5f",g:"109.0113,19.222483|12"},{n:"\u510b\u5dde",g:"109.413973,19.571153|13"},{n:"\u6f84\u8fc8",g:"109.996736,19.693135|13"},{n:"\u4e1c\u65b9",g:"108.85101,18.998161|13"},{n:"\u5b9a\u5b89",g:"110.32009,19.490991|13"},{n:"\u743c\u6d77",g:"110.414359,19.21483|13"},{n:"\u743c\u4e2d",g:"109.861849,19.039771|12"},{n:"\u4e50\u4e1c",g:"109.062698,18.658614|12"},{n:"\u4e34\u9ad8",g:"109.724101,19.805922|13"},{n:"\u9675\u6c34",g:"109.948661,18.575985|12"},{n:"\u4e09\u4e9a",g:"109.522771,18.257776|12"},{n:"\u5c6f\u660c",g:"110.063364,19.347749|13"},{n:"\u4e07\u5b81",g:"110.292505,18.839886|13"},{n:"\u6587\u660c",g:"110.780909,19.750947|13"},{n:"\u4e94\u6307\u5c71",g:"109.51775,18.831306|13"}]},{n:"\u6cb3\u5317",g:"115.661434,38.61384|7",cities:[{n:"\u77f3\u5bb6\u5e84",g:"114.522082,38.048958|12"},{n:"\u4fdd\u5b9a",g:"115.49481,38.886565|13"},{n:"\u6ca7\u5dde",g:"116.863806,38.297615|13"},{n:"\u627f\u5fb7",g:"117.933822,40.992521|14"},{n:"\u90af\u90f8",g:"114.482694,36.609308|13"},{n:"\u8861\u6c34",g:"115.686229,37.746929|13"},{n:"\u5eca\u574a",g:"116.703602,39.518611|13"},{n:"\u79e6\u7687\u5c9b",g:"119.604368,39.945462|12"},{n:"\u5510\u5c71",g:"118.183451,39.650531|13"},{n:"\u90a2\u53f0",g:"114.520487,37.069531|13"},{n:"\u5f20\u5bb6\u53e3",g:"114.893782,40.811188|13"}]},{n:"\u6cb3\u5357",g:"113.486804,34.157184|7",cities:[{n:"\u90d1\u5dde",g:"113.649644,34.75661|12"},{n:"\u5b89\u9633",g:"114.351807,36.110267|12"},{n:"\u9e64\u58c1",g:"114.29777,35.755426|13"},{n:"\u7126\u4f5c",g:"113.211836,35.234608|13"},{n:"\u5f00\u5c01",g:"114.351642,34.801854|13"},{n:"\u6d1b\u9633",g:"112.447525,34.657368|12"},{n:"\u6f2f\u6cb3",g:"114.046061,33.576279|13"},{n:"\u5357\u9633",g:"112.542842,33.01142|13"},{n:"\u5e73\u9876\u5c71",g:"113.300849,33.745301|13"},{n:"\u6fee\u9633",g:"115.026627,35.753298|12"},{n:"\u4e09\u95e8\u5ce1",g:"111.181262,34.78332|13"},{n:"\u5546\u4e18",g:"115.641886,34.438589|13"},{n:"\u65b0\u4e61",g:"113.91269,35.307258|13"},{n:"\u4fe1\u9633",g:"114.085491,32.128582|13"},{n:"\u8bb8\u660c",g:"113.835312,34.02674|13"},{n:"\u5468\u53e3",g:"114.654102,33.623741|13"},{n:"\u9a7b\u9a6c\u5e97",g:"114.049154,32.983158|13"}]},{n:"\u9ed1\u9f99\u6c5f",g:"128.047414,47.356592|6",cities:[{n:"\u54c8\u5c14\u6ee8",g:"126.657717,45.773225|12"},{n:"\u5927\u5e86",g:"125.02184,46.596709|12"},{n:"\u5927\u5174\u5b89\u5cad\u5730\u533a",g:"124.196104,51.991789|10"},{n:"\u9e64\u5c97",g:"130.292472,47.338666|13"},{n:"\u9ed1\u6cb3",g:"127.50083,50.25069|14"},{n:"\u9e21\u897f",g:"130.941767,45.32154|13"},{n:"\u4f73\u6728\u65af",g:"130.284735,46.81378|12"},{n:"\u7261\u4e39\u6c5f",g:"129.608035,44.588521|13"},{n:"\u4e03\u53f0\u6cb3",g:"131.019048,45.775005|14"},{n:"\u9f50\u9f50\u54c8\u5c14",g:"123.987289,47.3477|13"},{n:"\u53cc\u9e2d\u5c71",g:"131.171402,46.655102|13"},{n:"\u7ee5\u5316",g:"126.989095,46.646064|13"},{n:"\u4f0a\u6625",g:"128.910766,47.734685|14"}]},{n:"\u6e56\u5317",g:"112.410562,31.209316|8",cities:[{n:"\u6b66\u6c49",g:"114.3162,30.581084|12"},{n:"\u9102\u5dde",g:"114.895594,30.384439|14"},{n:"\u6069\u65bd",g:"109.517433,30.308978|14"},{n:"\u9ec4\u5188",g:"114.906618,30.446109|14"},{n:"\u9ec4\u77f3",g:"115.050683,30.216127|13"},{n:"\u8346\u95e8",g:"112.21733,31.042611|13"},{n:"\u8346\u5dde",g:"112.241866,30.332591|12"},{n:"\u6f5c\u6c5f",g:"112.768768,30.343116|13"},{n:"\u795e\u519c\u67b6\u6797\u533a",g:"110.487231,31.595768|13"},{n:"\u5341\u5830",g:"110.801229,32.636994|13"},{n:"\u968f\u5dde",g:"113.379358,31.717858|13"},{n:"\u5929\u95e8",g:"113.12623,30.649047|13"},{n:"\u4ed9\u6843",g:"113.387448,30.293966|13"},{n:"\u54b8\u5b81",g:"114.300061,29.880657|13"},{n:"\u8944\u6a0a",g:"112.176326,32.094934|12"},{n:"\u5b5d\u611f",g:"113.935734,30.927955|13"},{n:"\u5b9c\u660c",g:"111.310981,30.732758|13"}]},{n:"\u6e56\u5357",g:"111.720664,27.695864|7",cities:[{n:"\u957f\u6c99",g:"112.979353,28.213478|12"},{n:"\u5e38\u5fb7",g:"111.653718,29.012149|12"},{n:"\u90f4\u5dde",g:"113.037704,25.782264|13"},{n:"\u8861\u9633",g:"112.583819,26.898164|13"},{n:"\u6000\u5316",g:"109.986959,27.557483|13"},{n:"\u5a04\u5e95",g:"111.996396,27.741073|13"},{n:"\u90b5\u9633",g:"111.461525,27.236811|13"},{n:"\u6e58\u6f6d",g:"112.935556,27.835095|13"},{n:"\u6e58\u897f\u5dde",g:"109.745746,28.317951|14"},{n:"\u76ca\u9633",g:"112.366547,28.588088|13"},{n:"\u6c38\u5dde",g:"111.614648,26.435972|13"},{n:"\u5cb3\u9633",g:"113.146196,29.378007|13"},{n:"\u5f20\u5bb6\u754c",g:"110.48162,29.124889|13"},{n:"\u682a\u6d32",g:"113.131695,27.827433|13"}]},{n:"\u6c5f\u82cf",g:"119.368489,33.013797|8",cities:[{n:"\u5357\u4eac",g:"118.778074,32.057236|12"},{n:"\u5e38\u5dde",g:"119.981861,31.771397|12"},{n:"\u6dee\u5b89",g:"119.030186,33.606513|12"},{n:"\u8fde\u4e91\u6e2f",g:"119.173872,34.601549|12"},{n:"\u5357\u901a",g:"120.873801,32.014665|12"},{n:"\u82cf\u5dde",g:"120.619907,31.317987|12"},{n:"\u5bbf\u8fc1",g:"118.296893,33.95205|13"},{n:"\u6cf0\u5dde",g:"119.919606,32.476053|13"},{n:"\u65e0\u9521",g:"120.305456,31.570037|12"},{n:"\u5f90\u5dde",g:"117.188107,34.271553|12"},{n:"\u76d0\u57ce",g:"120.148872,33.379862|12"},{n:"\u626c\u5dde",g:"119.427778,32.408505|13"},{n:"\u9547\u6c5f",g:"119.455835,32.204409|13"}]},{n:"\u6c5f\u897f",g:"115.676082,27.757258|7",cities:[{n:"\u5357\u660c",g:"115.893528,28.689578|12"},{n:"\u629a\u5dde",g:"116.360919,27.954545|13"},{n:"\u8d63\u5dde",g:"114.935909,25.845296|13"},{n:"\u5409\u5b89",g:"114.992039,27.113848|13"},{n:"\u666f\u5fb7\u9547",g:"117.186523,29.303563|12"},{n:"\u4e5d\u6c5f",g:"115.999848,29.71964|13"},{n:"\u840d\u4e61",g:"113.859917,27.639544|13"},{n:"\u4e0a\u9976",g:"117.955464,28.457623|13"},{n:"\u65b0\u4f59",g:"114.947117,27.822322|13"},{n:"\u5b9c\u6625",g:"114.400039,27.81113|13"},{n:"\u9e70\u6f6d",g:"117.03545,28.24131|13"}]},{n:"\u5409\u6797",g:"126.262876,43.678846|7",cities:[{n:"\u957f\u6625",g:"125.313642,43.898338|12"},{n:"\u767d\u57ce",g:"122.840777,45.621086|13"},{n:"\u767d\u5c71",g:"126.435798,41.945859|13"},{n:"\u5409\u6797\u5e02",g:"126.564544,43.871988|12"},{n:"\u8fbd\u6e90",g:"125.133686,42.923303|13"},{n:"\u56db\u5e73",g:"124.391382,43.175525|12"},{n:"\u677e\u539f",g:"124.832995,45.136049|13"},{n:"\u901a\u5316",g:"125.94265,41.736397|13"},{n:"\u5ef6\u8fb9",g:"129.485902,42.896414|13"}]},{n:"\u8fbd\u5b81",g:"122.753592,41.6216|8",cities:[{n:"\u6c88\u9633",g:"123.432791,41.808645|12"},{n:"\u978d\u5c71",g:"123.007763,41.118744|13"},{n:"\u672c\u6eaa",g:"123.778062,41.325838|12"},{n:"\u671d\u9633",g:"120.446163,41.571828|13"},{n:"\u5927\u8fde",g:"121.593478,38.94871|12"},{n:"\u4e39\u4e1c",g:"124.338543,40.129023|12"},{n:"\u629a\u987a",g:"123.92982,41.877304|12"},{n:"\u961c\u65b0",g:"121.660822,42.01925|14"},{n:"\u846b\u82a6\u5c9b",g:"120.860758,40.74303|13"},{n:"\u9526\u5dde",g:"121.147749,41.130879|13"},{n:"\u8fbd\u9633",g:"123.172451,41.273339|14"},{n:"\u76d8\u9526",g:"122.073228,41.141248|13"},{n:"\u94c1\u5cad",g:"123.85485,42.299757|13"},{n:"\u8425\u53e3",g:"122.233391,40.668651|13"}]},{n:"\u5185\u8499\u53e4",g:"114.415868,43.468238|5",cities:[{n:"\u547c\u548c\u6d69\u7279",g:"111.660351,40.828319|12"},{n:"\u963f\u62c9\u5584\u76df",g:"105.695683,38.843075|14"},{n:"\u5305\u5934",g:"109.846239,40.647119|12"},{n:"\u5df4\u5f66\u6dd6\u5c14",g:"107.423807,40.76918|12"},{n:"\u8d64\u5cf0",g:"118.930761,42.297112|12"},{n:"\u9102\u5c14\u591a\u65af",g:"109.993706,39.81649|12"},{n:"\u547c\u4f26\u8d1d\u5c14",g:"119.760822,49.201636|12"},{n:"\u901a\u8fbd",g:"122.260363,43.633756|12"},{n:"\u4e4c\u6d77",g:"106.831999,39.683177|13"},{n:"\u4e4c\u5170\u5bdf\u5e03",g:"113.112846,41.022363|12"},{n:"\u9521\u6797\u90ed\u52d2\u76df",g:"116.02734,43.939705|11"},{n:"\u5174\u5b89\u76df",g:"122.048167,46.083757|11"}]},{n:"\u5b81\u590f",g:"106.155481,37.321323|8",cities:[{n:"\u94f6\u5ddd",g:"106.206479,38.502621|12"},{n:"\u56fa\u539f",g:"106.285268,36.021523|13"},{n:"\u77f3\u5634\u5c71",g:"106.379337,39.020223|13"},{n:"\u5434\u5fe0",g:"106.208254,37.993561|14"},{n:"\u4e2d\u536b",g:"105.196754,37.521124|14"}]},{n:"\u9752\u6d77",g:"96.202544,35.499761|7",cities:[{n:"\u897f\u5b81",g:"101.767921,36.640739|12"},{n:"\u679c\u6d1b\u5dde",g:"100.223723,34.480485|11"},{n:"\u6d77\u4e1c\u5730\u533a",g:"102.085207,36.51761|11"},{n:"\u6d77\u5317\u5dde",g:"100.879802,36.960654|11"},{n:"\u6d77\u5357\u5dde",g:"100.624066,36.284364|11"},{n:"\u6d77\u897f\u5dde",g:"97.342625,37.373799|11"},{n:"\u9ec4\u5357\u5dde",g:"102.0076,35.522852|11"},{n:"\u7389\u6811\u5dde",g:"97.013316,33.00624|14"}]},{n:"\u5c71\u4e1c",g:"118.527663,36.09929|8",cities:[{n:"\u6d4e\u5357",g:"117.024967,36.682785|12"},{n:"\u6ee8\u5dde",g:"117.968292,37.405314|12"},{n:"\u4e1c\u8425",g:"118.583926,37.487121|12"},{n:"\u5fb7\u5dde",g:"116.328161,37.460826|12"},{n:"\u83cf\u6cfd",g:"115.46336,35.26244|13"},{n:"\u6d4e\u5b81",g:"116.600798,35.402122|13"},{n:"\u83b1\u829c",g:"117.684667,36.233654|13"},{n:"\u804a\u57ce",g:"115.986869,36.455829|12"},{n:"\u4e34\u6c82",g:"118.340768,35.072409|12"},{n:"\u9752\u5c9b",g:"120.384428,36.105215|12"},{n:"\u65e5\u7167",g:"119.50718,35.420225|12"},{n:"\u6cf0\u5b89",g:"117.089415,36.188078|13"},{n:"\u5a01\u6d77",g:"122.093958,37.528787|13"},{n:"\u6f4d\u574a",g:"119.142634,36.716115|12"},{n:"\u70df\u53f0",g:"121.309555,37.536562|12"},{n:"\u67a3\u5e84",g:"117.279305,34.807883|13"},{n:"\u6dc4\u535a",g:"118.059134,36.804685|12"}]},{n:"\u5c71\u897f",g:"112.515496,37.866566|7",cities:[{n:"\u592a\u539f",g:"112.550864,37.890277|12"},{n:"\u957f\u6cbb",g:"113.120292,36.201664|12"},{n:"\u5927\u540c",g:"113.290509,40.113744|12"},{n:"\u664b\u57ce",g:"112.867333,35.499834|13"},{n:"\u664b\u4e2d",g:"112.738514,37.693362|13"},{n:"\u4e34\u6c7e",g:"111.538788,36.099745|13"},{n:"\u5415\u6881",g:"111.143157,37.527316|14"},{n:"\u6714\u5dde",g:"112.479928,39.337672|13"},{n:"\u5ffb\u5dde",g:"112.727939,38.461031|12"},{n:"\u9633\u6cc9",g:"113.569238,37.869529|13"},{n:"\u8fd0\u57ce",g:"111.006854,35.038859|13"}]},{n:"\u9655\u897f",g:"109.503789,35.860026|7",cities:[{n:"\u897f\u5b89",g:"108.953098,34.2778|12"},{n:"\u5b89\u5eb7",g:"109.038045,32.70437|13"},{n:"\u5b9d\u9e21",g:"107.170645,34.364081|12"},{n:"\u6c49\u4e2d",g:"107.045478,33.081569|13"},{n:"\u5546\u6d1b",g:"109.934208,33.873907|13"},{n:"\u94dc\u5ddd",g:"108.968067,34.908368|13"},{n:"\u6e2d\u5357",g:"109.483933,34.502358|13"},{n:"\u54b8\u9633",g:"108.707509,34.345373|13"},{n:"\u5ef6\u5b89",g:"109.50051,36.60332|13"},{n:"\u6986\u6797",g:"109.745926,38.279439|12"}]},{n:"\u56db\u5ddd",g:"102.89916,30.367481|7",cities:[{n:"\u6210\u90fd",g:"104.067923,30.679943|12"},{n:"\u963f\u575d\u5dde",g:"102.228565,31.905763|15"},{n:"\u5df4\u4e2d",g:"106.757916,31.869189|14"},{n:"\u8fbe\u5dde",g:"107.494973,31.214199|14"},{n:"\u5fb7\u9633",g:"104.402398,31.13114|13"},{n:"\u7518\u5b5c\u5dde",g:"101.969232,30.055144|15"},{n:"\u5e7f\u5b89",g:"106.63572,30.463984|13"},{n:"\u5e7f\u5143",g:"105.819687,32.44104|13"},{n:"\u4e50\u5c71",g:"103.760824,29.600958|13"},{n:"\u51c9\u5c71\u5dde",g:"102.259591,27.892393|14"},{n:"\u6cf8\u5dde",g:"105.44397,28.89593|14"},{n:"\u5357\u5145",g:"106.105554,30.800965|13"},{n:"\u7709\u5c71",g:"103.84143,30.061115|13"},{n:"\u7ef5\u9633",g:"104.705519,31.504701|12"},{n:"\u5185\u6c5f",g:"105.073056,29.599462|13"},{n:"\u6500\u679d\u82b1",g:"101.722423,26.587571|14"},{n:"\u9042\u5b81",g:"105.564888,30.557491|12"},{n:"\u96c5\u5b89",g:"103.009356,29.999716|13"},{n:"\u5b9c\u5bbe",g:"104.633019,28.769675|13"},{n:"\u8d44\u9633",g:"104.63593,30.132191|13"},{n:"\u81ea\u8d21",g:"104.776071,29.359157|13"}]},{n:"\u897f\u85cf",g:"89.137982,31.367315|6",cities:[{n:"\u62c9\u8428",g:"91.111891,29.662557|13"},{n:"\u963f\u91cc\u5730\u533a",g:"81.107669,30.404557|11"},{n:"\u660c\u90fd\u5730\u533a",g:"97.185582,31.140576|15"},{n:"\u6797\u829d\u5730\u533a",g:"94.349985,29.666941|11"},{n:"\u90a3\u66f2\u5730\u533a",g:"92.067018,31.48068|14"},{n:"\u65e5\u5580\u5219\u5730\u533a",g:"88.891486,29.269023|14"},{n:"\u5c71\u5357\u5730\u533a",g:"91.750644,29.229027|11"}]},{n:"\u65b0\u7586",g:"85.614899,42.127001|6",cities:[{n:"\u4e4c\u9c81\u6728\u9f50",g:"87.564988,43.84038|12"},{n:"\u963f\u62c9\u5c14",g:"81.291737,40.61568|13"},{n:"\u963f\u514b\u82cf\u5730\u533a",g:"80.269846,41.171731|12"},{n:"\u963f\u52d2\u6cf0\u5730\u533a",g:"88.137915,47.839744|13"},{n:"\u5df4\u97f3\u90ed\u695e",g:"86.121688,41.771362|12"},{n:"\u535a\u5c14\u5854\u62c9\u5dde",g:"82.052436,44.913651|11"},{n:"\u660c\u5409\u5dde",g:"87.296038,44.007058|13"},{n:"\u54c8\u5bc6\u5730\u533a",g:"93.528355,42.858596|13"},{n:"\u548c\u7530\u5730\u533a",g:"79.930239,37.116774|13"},{n:"\u5580\u4ec0\u5730\u533a",g:"75.992973,39.470627|12"},{n:"\u514b\u62c9\u739b\u4f9d",g:"84.88118,45.594331|13"},{n:"\u514b\u5b5c\u52d2\u82cf\u5dde",g:"76.137564,39.750346|11"},{n:"\u77f3\u6cb3\u5b50",g:"86.041865,44.308259|13"},{n:"\u5854\u57ce\u5730\u533a",g:"82.974881,46.758684|12"},{n:"\u56fe\u6728\u8212\u514b",g:"79.198155,39.889223|13"},{n:"\u5410\u9c81\u756a\u5730\u533a",g:"89.181595,42.96047|13"},{n:"\u4e94\u5bb6\u6e20",g:"87.565449,44.368899|13"},{n:"\u4f0a\u7281\u5dde",g:"81.297854,43.922248|11"}]},{n:"\u4e91\u5357",g:"101.592952,24.864213|7",cities:[{n:"\u6606\u660e",g:"102.714601,25.049153|12"},{n:"\u4fdd\u5c71",g:"99.177996,25.120489|13"},{n:"\u695a\u96c4\u5dde",g:"101.529382,25.066356|13"},{n:"\u5927\u7406\u5dde",g:"100.223675,25.5969|14"},{n:"\u5fb7\u5b8f\u5dde",g:"98.589434,24.44124|14"},{n:"\u8fea\u5e86\u5dde",g:"99.713682,27.831029|14"},{n:"\u7ea2\u6cb3\u5dde",g:"103.384065,23.367718|11"},{n:"\u4e3d\u6c5f",g:"100.229628,26.875351|13"},{n:"\u4e34\u6ca7",g:"100.092613,23.887806|14"},{n:"\u6012\u6c5f\u5dde",g:"98.859932,25.860677|14"},{n:"\u666e\u6d31",g:"100.980058,22.788778|14"},{n:"\u66f2\u9756",g:"103.782539,25.520758|12"},{n:"\u662d\u901a",g:"103.725021,27.340633|13"},{n:"\u6587\u5c71",g:"104.089112,23.401781|14"},{n:"\u897f\u53cc\u7248\u7eb3",g:"100.803038,22.009433|13"},{n:"\u7389\u6eaa",g:"102.545068,24.370447|13"}]},{n:"\u6d59\u6c5f",g:"119.957202,29.159494|8",cities:[{n:"\u676d\u5dde",g:"120.219375,30.259244|12"},{n:"\u6e56\u5dde",g:"120.137243,30.877925|12"},{n:"\u5609\u5174",g:"120.760428,30.773992|13"},{n:"\u91d1\u534e",g:"119.652576,29.102899|12"},{n:"\u4e3d\u6c34",g:"119.929576,28.4563|13"},{n:"\u5b81\u6ce2",g:"121.579006,29.885259|12"},{n:"\u8862\u5dde",g:"118.875842,28.95691|12"},{n:"\u7ecd\u5174",g:"120.592467,30.002365|13"},{n:"\u53f0\u5dde",g:"121.440613,28.668283|13"},{n:"\u6e29\u5dde",g:"120.690635,28.002838|12"},{n:"\u821f\u5c71",g:"122.169872,30.03601|13"}]}],other:[{n:"\u9999\u6e2f",g:"114.186124,22.293586|11"},{n:"\u6fb3\u95e8",g:"113.557519,22.204118|13"},{n:"\u53f0\u6e7e",g:"120.961454,23.80406|8"}]};var EnmAlarmLevel={NoAlarm:0,Critical:1,Major:2,Minor:3,Hint:4};var EnmMapType={GPS:0,Other:1};var NavMap={map:null,infoWnd:null,editWnd:null,translateStations:null,openStation:null,cityCenter:{lng:121.487899,lat:31.249162,level:12},render:function(){this.map=new BMap.Map("mapContainer");this.map.centerAndZoom(new BMap.Point(this.cityCenter.lng,this.cityCenter.lat),this.cityCenter.level);this.map.addControl(new BMap.NavigationControl());this.map.addControl(new BMap.ScaleControl());this.map.addControl(new BMap.OverviewMapControl());this.map.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_SATELLITE_MAP,BMAP_HYBRID_MAP]}));this.map.enableScrollWheelZoom();var b=new BMap.ContextMenu();var c=[{text:"\u653e\u5927",callback:function(){NavMap.map.zoomIn()}},{text:"\u7f29\u5c0f",callback:function(){NavMap.map.zoomOut()}},{text:"\u5728\u6b64\u6dfb\u52a0\u6807\u8bb0",callback:function(e){NavMap.initWnd(function(){var f=NavMap.createMarker(e,null);NavMap.map.addOverlay(f);NavMap.editWnd.open(f)})}}];for(var a=0;a<c.length;a++){b.addItem(new BMap.MenuItem(c[a].text,c[a].callback,100));if(a==1){b.addSeparator()}}this.map.addContextMenu(b);this.map.addEventListener("dragstart",function(){NavMap.initWnd(function(){NavMap.map.clearOverlays()})});this.map.addEventListener("dragend",function(){NavMap.createViewMarkers()});this.map.addEventListener("zoomstart",function(){NavMap.initWnd(function(){NavMap.map.clearOverlays()})});this.map.addEventListener("zoomend",function(){NavMap.createViewMarkers()});this.map.addEventListener("resize",function(){NavMap.createViewMarkers()});var d=new BMap.LocalCity();d.get(function(e){NavMap.setLocation(e.center,e.level,EnmMapType.Other)})},buildCityCenterTree:function(d){var a=d.getRootNode();if(a){for(var c=0;c<cityCenter.municipalities.length;c++){var e=new Ext.tree.TreeNode({id:cityCenter.municipalities[c].g,text:cityCenter.municipalities[c].n,singleClickExpand:true,iconCls:"icon-building"});a.appendChild(e)}for(var c=0;c<cityCenter.other.length;c++){var e=new Ext.tree.TreeNode({id:cityCenter.other[c].g,text:cityCenter.other[c].n,singleClickExpand:true,iconCls:"icon-building"});a.appendChild(e)}for(var c=0;c<cityCenter.provinces.length;c++){var e=new Ext.tree.TreeNode({id:cityCenter.provinces[c].g,text:cityCenter.provinces[c].n,singleClickExpand:true,iconCls:"icon-building"});for(var b=0;b<cityCenter.provinces[c].cities.length;b++){var f=new Ext.tree.TreeNode({id:cityCenter.provinces[c].cities[b].g,text:cityCenter.provinces[c].cities[b].n,singleClickExpand:true,iconCls:"icon-building"});e.appendChild(f)}a.appendChild(e)}}},setMapPanelSize:function(b){var a=Ext.get("mapContainer");if(a){a.setWidth(b.getWidth());a.setHeight(b.getHeight()-50)}},onNavTreeItemClick:function(b,f){if(!b.parentNode){return false}var i=b.id.split("|");var c=i[0].split(",");var h=parseInt(i[1],10);var a=parseFloat(c[0]);var d=parseFloat(c[1]);this.setLocation(new BMap.Point(a,d),h,EnmMapType.Other)},createViewMarkers:function(){this.stopTask(0);this.initWnd(function(){NavMap.map.clearOverlays()});var b=this.map.getBounds();var a=b.getSouthWest();var c=b.getNorthEast();X.NavMaps.GetViewStations(a.lng-0.02,c.lng,a.lat-0.01,c.lat,{success:function(d){if(!Ext.isEmpty(d,false)){NavMap.translateStations=[];var f=Ext.util.JSON.decode(d,true);if(f&&f.length>0){for(var e=0;e<f.length;e++){if(f[e].mapType==EnmMapType.Other){NavMap.addMarker(f[e])}else{NavMap.translateStations.push(f[e])}}if(NavMap.translateStations.length>0){NavMap.translateGPS()}else{NavMap.startTask(0)}}}}})},addMarker:function(c){var a=new BMap.Point(c.lng,c.lat);var b=this.createMarker(a,c);this.map.addOverlay(b);if(this.openStation){if(c.lscId==this.openStation.lscId&&c.staId==this.openStation.staId){this.infoWnd.open(b);this.openStation=null}}},translateGPS:function(){if(this.translateStations.length>0){var c=[];var b=20;while(true){if(NavMap.translateStations.length==0||c.length>=b){break}var d=NavMap.translateStations.shift();if(d){var a=new BMap.Point(d.lng,d.lat);a._data=d;c.push(a)}}if(c.length>0){BMap.Convertor.translate(c,0,function(g){if(g){var h=null;for(var e=0;e<g.length;e++){h=g[e];if(h.error!=0){continue}var f=new BMap.Point(h.x,h.y);var i=c[e];if(i&&i._data){i._data.mapType=EnmMapType.Other;i._data.lng=f.lng;i._data.lat=f.lat;NavMap.addMarker(i._data)}}}if(NavMap.translateStations.length>0){window.setTimeout(function(){NavMap.translateGPS()},1000)}else{NavMap.startTask(0)}})}}},createMarker:function(a,d){var e=d||{staName:"undefined"};var b=new BMap.Marker(a,{icon:new BMap.Icon(this.getIconUrl(EnmAlarmLevel.NoAlarm),new BMap.Size(16,16))});var c=new BMap.Label(e.staName,{offset:new BMap.Size(16,0)});c.setStyle({borderColor:"#808080",color:"#333333",cursor:"pointer"});b.setLabel(c);c._marker=b;if(d){b._data=d}b.addEventListener("click",function(){NavMap.initWnd();NavMap.infoWnd.open(this)});c.addEventListener("click",function(){NavMap.fireEvent(this._marker,"click")});return b},updateViewMarkers:function(){var b=this.map.getBounds();var a=b.getSouthWest();var c=b.getNorthEast();X.NavMaps.GetMarkers(a.lng-0.02,c.lng,a.lat-0.01,c.lat,{success:function(o){if(!Ext.isEmpty(o,false)){var f=Ext.util.JSON.decode(o,true);if(f){var m=Ext.get("div-alarm-cnt");var n=Ext.get("div-alarm-1");var l=Ext.get("div-alarm-2");var k=Ext.get("div-alarm-3");var j=Ext.get("div-alarm-4");if(m){m.update(String.format("({0})",f.AL1+f.AL2+f.AL3+f.AL4))}if(n){n.update(String.format("({0})",f.AL1))}if(l){l.update(String.format("({0})",f.AL2))}if(k){k.update(String.format("({0})",f.AL3))}if(j){j.update(String.format("({0})",f.AL4))}var d=NavMap.map.getOverlays();for(var e=0;e<d.length;e++){if(d[e] instanceof BMap.Marker){if(d[e]._data){var g=encodeURIComponent(String.format("m_{0}_{1}",d[e]._data.lscId,d[e]._data.staName));var h=f.Stations[g];if(h){d[e].setIcon(new BMap.Icon(NavMap.getIconUrl(h),new BMap.Size(16,16)))}else{d[e].setIcon(new BMap.Icon(NavMap.getIconUrl(EnmAlarmLevel.NoAlarm),new BMap.Size(16,16)))}}}}}}}})},updateMarker:function(a,b){a.setIcon(new BMap.Icon(NavMap.getIconUrl(b.maxAL),new BMap.Size(16,16)));a.getLabel().setContent(b.staName);a._data=b},createInfoWindow:function(){var a=document.getElementById("infoWnd");var d=document.getElementById("infoWnd_content");var b=document.getElementById("infoWnd_content_container");var f=document.getElementById("infoWnd_title");var g=document.getElementById("infoWnd_title_container");var c=document.getElementById("infoWnd_title_container_name");var h=document.getElementById("infoWnd_content_control_delete");var e=document.getElementById("infoWnd_content_control_edit");var i=new BMapLib.SearchInfoWindow(this.map,d,{title:f.innerHTML,width:300,height:150,panel:null,enableAutoPan:true,searchTypes:[]});i.setWndTitle=function(j){g.setAttribute("title",j);c.innerHTML=NavMap.getShortTitle(j,20);this.setTitle(f.innerHTML)};i.setWndContent=function(j){b.innerHTML=j;this.setContent(d)};i.setWndWaitting=function(){b.innerHTML="<div class='waitting'>\u6570\u636e\u52a0\u8f7d\u4e2d...</div>";this.setContent(d)};i.showDetailWnd=function(j){if(this._marker._data){X.NavMaps.ShowDetailWnd(this._marker._data.lscId,this._marker._data.staName,j)}};i.showDevWnd=function(){if(this._marker._data){X.NavMaps.ShowDevWnd(this._marker._data.lscId,this._marker._data.staId,this._marker._data.staName)}};i.addEventListener("open",function(){this._marker.getLabel().hide();this.setWndTitle(this._marker._data.staName);this.setWndWaitting();X.NavMaps.GetStationDetail(this._marker._data.lscId,this._marker._data.staId,{success:function(j){if(!Ext.isEmpty(j,false)){var k=Ext.util.JSON.decode(j,true);if(k){NavMap.infoWnd.setWndContent(NavMap.getContentWnd(k))}}}})});i.addEventListener("close",function(){if(this._marker){this._marker.getLabel().show()}});NavMap.addEventListener(h,"click",function(){X.NavMaps.UpdateMarker(NavMap.infoWnd._marker._data.lscId,NavMap.infoWnd._marker._data.staId,NavMap.infoWnd._marker._data.lscId,EnmMapType.GPS,NavMap.infoWnd._marker._data.staId,0,0,"",{success:function(j){NavMap.infoWnd.close();NavMap.map.removeOverlay(NavMap.infoWnd._marker)}})});NavMap.addEventListener(e,"click",function(){if(NavMap.infoWnd&&NavMap.editWnd){NavMap.infoWnd.close();NavMap.editWnd.open(NavMap.infoWnd._marker)}return false});return i},createEditWindow:function(){var f=document.getElementById("editWnd_content");var d=document.getElementById("editWnd_title");var b=document.getElementById("editWnd_title_container");var c=document.getElementById("btnSave");var e=document.getElementById("btnCancel");var a=new BMapLib.SearchInfoWindow(this.map,f,{title:d.innerHTML,width:300,height:165,panel:null,enableAutoPan:true,searchTypes:[]});a.addEventListener("open",function(){if(this._marker){this._marker.getLabel().hide();var g=this._marker.getPosition();us_editWnd_lng.setValue(g.lng);us_editWnd_lat.setValue(g.lat);if(this._marker._data){StaComboBox.store._staId=this._marker._data.staId;LscsComboBox.setValueAndFireSelect(String.format("{0}&{1}",this._marker._data.lscId,this._marker._data.groupId));us_editWnd_add.setValue(this._marker._data.address)}else{var h=new BMap.Geocoder();h.getLocation(g,function(i){if(i){var j=i.addressComponents;us_editWnd_add.setValue(String.format("{0}{1}{2}{3}{4}",j.province,j.city,j.district,j.street,j.streetNumber))}})}c.disabled=false}});a.addEventListener("close",function(){if(this._marker){if(!this._marker._data){NavMap.map.removeOverlay(this._marker)}else{this._marker.getLabel().show()}}});NavMap.addEventListener(c,"click",function(){var h=LscsComboBox.getValue().split("&");var i={lscId:h[0],lscName:LscsComboBox.getText(),groupId:h[1],staId:StaComboBox.getValue(),staName:StaComboBox.getText(),mapType:EnmMapType.Other,lng:us_editWnd_lng.getRawValue(),lat:us_editWnd_lat.getRawValue(),address:us_editWnd_add.getRawValue()};if(Ext.isEmpty(i.lscId,false)||Ext.isEmpty(i.staId,false)||Ext.isEmpty(i.lng,false)||Ext.isEmpty(i.lat,false)){alert("\u63d0\u793a\uff1a\u6570\u636e\u65e0\u6548\uff0c\u4fdd\u5b58\u5931\u8d25\uff01");return false}this.disabled=true;var j=NavMap.editWnd._marker._data?NavMap.editWnd._marker._data.lscId:i.lscId;var g=NavMap.editWnd._marker._data?NavMap.editWnd._marker._data.staId:i.staId;X.NavMaps.UpdateMarker(j,g,i.lscId,i.staId,i.mapType,i.lng,i.lat,i.address,{success:function(k){NavMap.updateMarker(NavMap.editWnd._marker,i);NavMap.editWnd.close();if(NavMap.infoWnd){NavMap.infoWnd.open(NavMap.editWnd._marker)}}})});NavMap.addEventListener(e,"click",function(){NavMap.editWnd.close();return false});return a},showTotalWnd:function(a){X.NavMaps.ShowTotalWnd(a)},getIconUrl:function(a){switch(a){case EnmAlarmLevel.NoAlarm:return"Resources/images/Baidu/Map/labAL0.gif";case EnmAlarmLevel.Critical:return"Resources/images/Baidu/Map/labAL1.gif";case EnmAlarmLevel.Major:return"Resources/images/Baidu/Map/labAL2.gif";case EnmAlarmLevel.Minor:return"Resources/images/Baidu/Map/labAL3.gif";case EnmAlarmLevel.Hint:return"Resources/images/Baidu/Map/labAL4.gif";default:return"Resources/images/Baidu/Map/labAL0.gif"}},getShortTitle:function(e,a){if(e.length*2<a){return e}var f=e.replace(/[^\x00-\xff]/g,"^^");var d=f.substring(0,a);var b=(d.split("^").length-1)/2;a=a-b;var c=e.substring(0,a);if(a<e.length){return String.format("{0}...",c)}else{return c}},getContentWnd:function(a){return String.format('<div class="contentWndBox"><table border="0" cellpadding="0" cellspacing="0" class="content"><tr><td valign="top" class="title">Lsc\uff1a</td><td valign="top" title="{0}">{0}</td></tr><tr><td valign="top" class="title">\u5c40\u7ad9\uff1a</td><td valign="top" title="{1}">{1}</td></tr><tr><td valign="top" class="title">\u7c7b\u578b\uff1a</td><td valign="top" title="{2}">{2}</td></tr><tr><td valign="top" class="title">\u7279\u5f81\uff1a</td><td valign="top" title="{3}">{3}</td></tr><tr><td valign="top" class="title">\u5730\u5740\uff1a</td><td valign="top" title="{4}" style="height:30px">{5}</td></tr></table><table border="0" cellpadding="0" cellspacing="2" class="alarm"><tr><td class="title">\u4e00\u7ea7\u544a\u8b66\uff1a</td><td><a href="javascript:void(0)" onclick="javascript:NavMap.infoWnd.showDetailWnd(EnmAlarmLevel.Critical);return false">{6}&nbsp;\u6761\u00bb</a></td><td class="title">\u4e8c\u7ea7\u544a\u8b66\uff1a</td><td><a href="javascript:void(0)" onclick="javascript:NavMap.infoWnd.showDetailWnd(EnmAlarmLevel.Major);return false">{7}&nbsp;\u6761\u00bb</a></td></tr><tr><td class="title">\u4e09\u7ea7\u544a\u8b66\uff1a</td><td><a href="javascript:void(0)" onclick="javascript:NavMap.infoWnd.showDetailWnd(EnmAlarmLevel.Minor);return false">{8}&nbsp;\u6761\u00bb</a></td><td class="title">\u56db\u7ea7\u544a\u8b66\uff1a</td><td><a href="javascript:void(0)" onclick="javascript:NavMap.infoWnd.showDetailWnd(EnmAlarmLevel.Hint);return false">{9}&nbsp;\u6761\u00bb</a></td></tr></table></div></div>',a.lscName,a.staName,a.staTypeName,a.staFeatureName,a.address,NavMap.getShortTitle(a.address,82),a.AL1,a.AL2,a.AL3,a.AL4)},mapFilterChange:function(b,c,a){delete b._filterData;delete b._filterIndex},mapFilterSearch:function(d,f){var c=TreeTriggerField,g=c.getRawValue();if(Ext.isEmpty(g,false)){return false}if(c._filterData!=null&&c._filterIndex!=null){var b=c._filterIndex+1;var a=c._filterData;if(b>=a.length){b=0}this.openStation={lscId:a[b].lscId,staId:a[b].staId};this.setLocation(new BMap.Point(a[b].lng,a[b].lat),18,a[b].mapType);c._filterIndex=b}else{X.NavMaps.GetFilterStations(g,{success:function(h){if(!Ext.isEmpty(h,false)){var i=Ext.util.JSON.decode(h,true);if(i){var e=i.length;if(e>0){NavMap.openStation={lscId:i[0].lscId,staId:i[0].staId};NavMap.setLocation(new BMap.Point(i[0].lng,i[0].lat),18,i[0].mapType);c._filterData=i;c._filterIndex=0}}}}})}},setLocation:function(a,d,c){var b=this.map.getZoom();this.map.centerAndZoom(a,d);if(b==d){this.createViewMarkers()}},openMarker:function(b){if(b){var c=this.map.getOverlays();for(var a=0;a<c.length;a++){if(c[a] instanceof BMap.Marker){if(c[a]._data&&c[a]._data.lscId==b.lscId&&c[a]._data.staId==b.staId){this.fireEvent(c[a],"click");this.openStation=null;break}}}}},initWnd:function(a){if(this.infoWnd){this.infoWnd.close()}else{this.infoWnd=this.createInfoWindow()}if(this.editWnd){this.editWnd.close()}else{this.editWnd=this.createEditWindow()}if(a&&typeof(a)=="function"){a()}},startTask:function(a){if(a>=NavMapsTaskManager.tasks.length){return false}if(NavMapsTaskManager.tasks[a]._running==null){NavMapsTaskManager.tasks[a]._running=false}if(!NavMapsTaskManager.tasks[a]._running){NavMapsTaskManager.startTask(a);NavMapsTaskManager.tasks[a]._running=true}},stopTask:function(a){if(a>=NavMapsTaskManager.tasks.length){return false}if(NavMapsTaskManager.tasks[a]._running==null){NavMapsTaskManager.tasks[a]._running=false}if(NavMapsTaskManager.tasks[a]._running){NavMapsTaskManager.stopTask(a);NavMapsTaskManager.tasks[a]._running=false}},addEventListener:function(a,b,c){if(a.addEventListener){a.addEventListener(b,c,false)}else{if(a.attachEvent){a.attachEvent("on"+b,c)}else{a["on"+b]=c}}},fireEvent:function(a,b){b.indexOf("on")!=0&&(b="on"+b);a.dispatchEvent(b)}};
